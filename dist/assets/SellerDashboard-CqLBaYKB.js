import{h as fe,u as _,r as s,a as V,b as G,j as e,c as ee,P as De,E as ae,y as K,e as Z,s as Ie,d as $e,p as Be,M as me,i as qe,S as Ne,m as Oe,X as se,o as Ue,U as We,k as ge,l as He,n as Je,L as Ve,q as de,R as Qe,f as B}from"./index-ClbqFBav.js";import{u as le,E as ve,B as ye,C as oe,a as _e,A as Ke,b as Ye,H as Xe,S as Ge,c as R,d as Ze,e as es,F as ss,R as ts,T as as,P as ls,f as is,g as ns,Q as rs,U as cs,W as we,M as ds,j as os,V as ms,k as xs,l as hs,h as us,m as xe,i as js,L as ps}from"./Layout-ox794BGF.js";import{A as bs,S as ie}from"./AddBank-MonclNDJ.js";import{C as fs,S as Ns,B as gs,P as vs,D as je,L as ke,T as ys,a as ws,b as ks,c as Ss}from"./DeleteModal-YdKmzftw.js";const Cs=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],Ps=fe("arrow-down-left",Cs);const Rs=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],zs=fe("arrow-up-right",Rs),{avatar:Fs}=ee;function Es(){const{user:i}=_(),o=JSON.parse(i),[d,m]=s.useState(!0),[u,b]=s.useState(!1),[N,y]=s.useState(!1),[c,j]=s.useState(!1),[E,C]=s.useState(!1),[g,h]=s.useState(!1),[n,I]=s.useState(!1),[t,M]=s.useState(!1),[A,$]=s.useState(!1),[w,q]=s.useState(!1),[L,O]=s.useState(!1),[D,v]=s.useState(!1),[k,x]=s.useState(!1),[a,S]=s.useState(!1),[z,l]=s.useState(!1),[F,r]=s.useState(!1),[p,P]=s.useState(!1),Q="0236280645",[U,W]=s.useState(!1),Se=V();function Ce(T){const J=new Date(T),Me=J.getDate(),Ae=J.toLocaleString("default",{month:"short"});let te=J.getHours();const Te=J.getMinutes().toString().padStart(2,"0"),Le=te>=12?"pm":"am";return te=te%12||12,`${Me} ${Ae}, ${te}:${Te}${Le}`}const[H,Pe]=s.useState({currentPassword:"",newPassword:""}),{mutate:Re,isLoading:ze,error:at,data:lt}=G({mutationFn:T=>Z.put(Ie,T),onSuccess:T=>{console.log(T),K.success("paswword changed successfully",{autoClose:2e3}),Se("/login")},onError:T=>{K.error(T.message,{autoClose:2e3})}}),{data:f,error:it,refetch:nt,isFetching:he}=le({queryKey:[Be]}),Fe=async()=>{try{await navigator.clipboard.writeText(Q),W(!0),setTimeout(()=>W(!1),1500)}catch(T){console.error("Copy failed",T)}},ue=T=>{Pe({...H,[T.target.name]:T.target.value})},Ee=T=>{T.preventDefault();const J={currentPassword:H.currentPassword,newPassword:H.newPassword,twoFactorEnabled:!1,biometricsEnabled:!1};H.currentPassword.length===0||H.newPassword.length===0||(console.log(J),Re(J))};return e.jsxs("div",{className:"bg-light min-vh-100 ",children:[e.jsxs("div",{className:"bg-white p-3 d-flex justify-content-between align-items-center border-bottom",children:[e.jsx("h6",{className:"fw-bold m-0",children:"Profile"}),e.jsx(ve,{size:20})]}),e.jsxs("div",{className:"position-relative rounded-2 ",children:[e.jsx("img",{src:f?.data?.profilePicture||Fs,alt:"profile",className:"w-100",style:{height:350,objectFit:"cover"}}),e.jsxs("div",{className:"position-absolute w-100 px-3  translate-middle-y",children:[e.jsx("div",{className:"w-50"}),e.jsx("div",{className:"card border-0 shadow text-white",style:{borderRadius:"18px",background:"linear-gradient(180deg, #0d6efd 0%, #0b5ed7 100%)",opacity:.9},children:e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsxs("h5",{className:"fw-bold mb-1",children:[f?.data?.businessName||f?.data?.firstName," "," stores",e.jsx(ye,{size:10,className:"text-white"})]}),e.jsxs("div",{className:"small opacity-75",children:[f?.data?.firstName," ",f?.data?.lastName]})]}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx("button",{className:"btn btn-light btn-sm rounded-circle",children:e.jsx(De,{size:16,onClick:()=>l(!0)})})})]}),e.jsxs("div",{className:"d-flex flex-wrap gap-3 mt-2 small",children:[e.jsxs("span",{children:[e.jsx("small",{children:"NIN:"}),f?.data?.nin," ",e.jsx(ae,{size:14,className:"ms-1"})]}),e.jsxs("span",{children:[e.jsx("small",{children:"BVN:"}),f?.data?.bvn," ",e.jsx(ae,{size:14,className:"ms-1"})]})]}),e.jsxs("div",{className:"bg-white text-dark mt-3 p-3",style:{borderRadius:14},children:[e.jsxs("div",{className:"row g-2 small mb-2",children:[e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Email"}),e.jsxs("div",{className:"fw-semibold",children:[f?.data?.email," "]})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Store"}),e.jsxs("div",{className:"fw-semibold text-truncate",children:[f?.data?.location," "]})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Rating"}),e.jsxs("div",{className:"fw-semibold",children:[f?.data?.storeRating||5," "]})]})]}),e.jsxs("div",{className:"row g-2 mb-2 small",children:[e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Address"}),e.jsxs("div",{className:"fw-semibold text-truncate",children:[" ",f?.data?.location]})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Phone"}),e.jsx("div",{className:"fw-semibold small",children:f?.data?.phone})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Reg No"}),e.jsx("div",{className:"fw-semibold",children:f?.data?.businessRegistration})]})]})]})]})})]})]}),e.jsx("div",{style:{height:120}}),e.jsxs("div",{className:"px-3 mt-5",children:[e.jsx("h6",{className:"fw-bold ",children:"My Assets"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-1 mb-3",children:[e.jsx("button",{className:"btn btn-primary rounded-pill btn-sm fs-6 px-4",onClick:()=>P(!0),children:"Afomo Wallet"}),e.jsx("button",{className:"btn btn-secondary rounded-pill btn-sm fs-6 px-3",onClick:()=>C(!0),children:"Bank"})]}),e.jsx("div",{className:"card border-0 text-white shadow-sm",style:{borderRadius:16,background:"linear-gradient(135deg, #FFA500, #FFB703)"},children:e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"small fw-semibold d-flex align-items-center gap-1",style:{cursor:"pointer"},onClick:Fe,children:["Virtual Account:",e.jsx("span",{className:"opacity-75",children:Q}),U?e.jsx(oe,{size:14,className:"text-success ms-1"}):e.jsx(_e,{size:14,className:"ms-1"})]}),e.jsx("div",{className:"form-check form-switch m-0",children:e.jsx("input",{className:"form-check-input",type:"checkbox",defaultChecked:!0})})]}),U&&e.jsx("small",{className:"text-white-50",children:"Copied!"}),e.jsxs("div",{className:"d-flex justify-content-between gap-2 mt-3",children:[e.jsx(ne,{icon:e.jsx(Ke,{size:16}),label:"Deposit"}),e.jsx(ne,{icon:e.jsx(Ye,{size:16}),label:"Withdraw"}),e.jsx(ne,{icon:e.jsx(Xe,{size:16}),label:"History"})]})]})})]}),e.jsxs("div",{className:"px-3 mt-4",children:[e.jsx("div",{className:"card border-0 shadow-sm rounded-1",onClick:()=>m(!d),style:{cursor:"pointer"},children:e.jsxs("div",{className:"card-body d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx(Ge,{className:"text-danger"}),e.jsx("span",{className:"fw-medium",children:"Security & Privacy"})]}),e.jsx(R,{style:{transform:d?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]})}),e.jsx("div",{style:{maxHeight:d?300:0,opacity:d?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx("div",{className:"card border shadow-sm rounded-3 ",children:e.jsxs("div",{className:"card-body ",style:{backgroundColor:"#fdf0f0ff",borderRadius:8},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1 ",onClick:()=>b(!u),children:[e.jsx("p",{className:"fw-bold text-muted",children:"Change Password"}),e.jsx(R,{size:16,style:{transform:u?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsx("div",{style:{maxHeight:u?200:0,opacity:u?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsxs("form",{children:[e.jsx(pe,{label:"Current Password",value:H.currentPassword,onChange:ue,name:"currentPassword"}),e.jsx(pe,{label:"New Password",value:H.newPassword,onChange:ue,name:"newPassword"}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-sm mt-2 ",onClick:Ee,disabled:ze,children:"save"})]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1 ",onClick:()=>x(!k),children:[e.jsx("p",{className:"fw-bold text-muted",children:"Recent Login Activity"}),e.jsx(R,{size:16,style:{transform:k?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsxs("div",{style:{maxHeight:k?200:0,opacity:k?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Device"}),e.jsx("p",{className:"fw-bold text-muted",children:f?.data?.recentLogins[0]?.device})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Location"}),e.jsx("p",{className:"fw-bold text-muted",children:"Wuse, Abuja"})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Time"}),e.jsx("p",{className:"fw-bold text-muted",children:Ce(f?.data?.recentLogins[0]?.time)})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Status"}),e.jsx("p",{className:"fw-bold text-muted",children:f?.data?.recentLogins[0]?.status})]})]}),e.jsx(Y,{label:"Two Factor Authentication",defaultChecked:f?.data?.twoFactorEnabled}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Delete/Activate Account"}),e.jsx(R,{size:16})]})]})})})]}),e.jsxs("div",{className:"px-3 mt-1 scrollbar-show",children:[e.jsx("div",{className:"card border-0 shadow-sm rounded-3",onClick:()=>j(!c),style:{cursor:"pointer"},children:e.jsxs("div",{className:"card-body d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx(Ze,{className:"text-primary"}),e.jsx("span",{className:"fw-medium",children:"Setting"})]}),e.jsx(R,{style:{transform:c?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]})}),e.jsx("div",{style:{maxHeight:c?500:0,opacity:c?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx("div",{className:"card border shadow-sm rounded-3 ",children:e.jsxs("div",{className:"card-body ",style:{backgroundColor:"#f1f9fdff",borderRadius:8},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3 ",onClick:()=>h(!g),children:[e.jsx("h6",{className:"fw-bold text-muted",children:"Notification & Preferences"}),e.jsx(R,{size:16,style:{transform:g?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsxs("div",{style:{maxHeight:g?200:0,opacity:g?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:[e.jsx(Y,{label:"Push Notification",defaultChecked:f?.data?.settings?.pushNotifications}),e.jsx(Y,{label:"Email/SMS Preferences",defaultChecked:f?.data?.settings?.smsNotifications}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center fw-bold text-muted",children:[e.jsx("p",{children:"Light/Dark Mode"}),e.jsx("p",{children:"System Default"})]})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1  ",onClick:()=>y(!N),children:[e.jsx("h6",{className:"fw-bold text-muted",children:"Save Payment Method"}),e.jsx(R,{size:16,style:{transform:N?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsxs("div",{style:{maxHeight:N?200:0,opacity:N?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center fw-bold text-muted",children:[e.jsx("p",{children:"Afomo Wallet"}),e.jsx("p",{children:"Virtual-07889900"})]}),e.jsx(Y,{label:"Enable Biomtric",defaultChecked:!0}),e.jsx(Y,{label:"Enable OTP Confirmation",defaultChecked:!0}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center fw-bold text-muted",children:[e.jsx("p",{children:"Payment Pin"}),e.jsx(R,{size:16})]})]}),e.jsxs("div",{className:"card border shadow-sm rounded-3  bg-light",children:[e.jsxs("div",{className:"card-body ",style:{maxHeight:300,overflowY:"auto",backgroundColor:"#f1f9fdff",borderRadius:8},children:[e.jsx("div",{className:"text-muted fw-bold",children:"Other Bank Account"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Bank"}),e.jsx("p",{className:"fw-bold text-muted",children:"GTB"})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Name"}),e.jsx("p",{className:"fw-bold text-muted",children:"Johh Will"})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Account No"}),e.jsx("p",{className:"fw-bold text-muted",children:"0988775566"})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Status"}),e.jsx("p",{className:"fw-bold text-muted",children:"Successfull"})]})]}),e.jsx("div",{className:"d-flex justify-content-between align-items-center fw-bold text-muted"})]})]})})})]}),e.jsxs("div",{className:"px-3 mt-1 scrollbar-show",children:[e.jsx("div",{className:"card border-0 shadow-sm rounded-3",onClick:()=>I(!n),style:{cursor:"pointer"},children:e.jsxs("div",{className:"card-body d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx(es,{className:"text-success"}),e.jsx("span",{className:"fw-medium",children:"Support & Help"})]}),e.jsx(R,{style:{transform:n?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]})}),e.jsx("div",{style:{maxHeight:n?500:0,opacity:n?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx("div",{className:"card border shadow-sm rounded-3 ",children:e.jsxs("div",{className:"card-body ",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",onClick:()=>M(!t),children:[e.jsx("h6",{className:"fw-bold text-muted",children:"Help & FAQs"}),e.jsx(R,{size:16,style:{transform:t?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsx("div",{style:{maxHeight:t?200:0,opacity:t?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx(ss,{})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",onClick:()=>v(!D),children:[e.jsx("h6",{className:"fw-bold text-muted",children:"Contact Support"}),e.jsx(R,{size:16,style:{transform:D?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsx("div",{style:{maxHeight:D?200:0,opacity:D?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx("div",{className:"card border shadow-sm rounded-3 py-4 ",children:e.jsx("div",{className:"card-body py-2 my-1 text-justify fw-bold text-muted ",children:e.jsx("i",{children:"For questions, complaints, or support; Afomo Support Team Email: support@afomo.app In App Support: Available within the Afomo app"})})})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",onClick:()=>q(!w),children:[e.jsx("p",{className:"fw-bold text-muted",children:"Return & Refund Policy"}),e.jsx(R,{size:16,style:{transform:w?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsx("div",{style:{maxHeight:w?200:0,opacity:w?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx(ts,{})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",onClick:()=>$(!A),children:[e.jsx("p",{className:"fw-bold text-muted",children:"Terms & Condition"}),e.jsx(R,{size:16,style:{transform:A?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsx("div",{style:{maxHeight:A?200:0,opacity:A?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx(as,{})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",onClick:()=>O(!L),children:[e.jsx("p",{className:"fw-bold text-muted",children:"Privacy Policy"}),e.jsx(R,{size:16,style:{transform:L?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsx("div",{style:{maxHeight:L?200:0,opacity:L?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx(ls,{})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",onClick:()=>S(!a),children:[e.jsx("p",{className:"fw-bold text-muted",children:"Report & Abuse"}),e.jsx(R,{size:16,style:{transform:a?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsx("div",{style:{maxHeight:a?200:0,opacity:a?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx(is,{})})]})})})]}),z&&e.jsx(ns,{showProfileModal:z,setShowProfileModal:l,userJson:o,profileData:f,isFetching:he}),E&&e.jsx(bs,{showBankModal:E,setShowBankModal:C,userJson:o,profileData:f,isFetching:he}),p&&e.jsx(rs,{showWalletModal:p,setShowWalletModal:P}),F&&e.jsx(cs,{showUpgradeModal:F,setShowUpgradeModal:r})]})}function pe({label:i,name:o,onChange:d,value:m}){const[u,b]=s.useState(!1);return e.jsx("div",{className:"mb-1",children:e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:u?"text":"password",className:"form-control",placeholder:i,name:o,value:m,onChange:d}),e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>b(!u),children:u?e.jsx($e,{size:18}):e.jsx(ae,{size:18})})]})})}function Y({label:i,defaultChecked:o}){return e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-1",children:[e.jsx("p",{className:"fw-bold text-muted",children:i}),e.jsx("div",{className:"form-check form-switch m-0",children:e.jsx("input",{className:"form-check-input ms-3",type:"checkbox",defaultChecked:o})})]})}function ne({icon:i,label:o}){return e.jsxs("button",{className:"btn btn-light btn-sm flex-fill d-flex align-items-center justify-content-center gap-1 fw-semibold",children:[i,e.jsx("span",{children:o})]})}const{phone:Ms,jewelShop:As,bags:Ts}=ee,Ls=[{id:1,title:"Original Winter Jacket 2XL",amount:"₦29,500",date:"Sat, 06 Jan 2026",type:"credit",img:As},{id:2,title:"Original Winter Jacket 2XL",amount:"₦29,500",date:"Sat, 06 Jan 2026",type:"credit",img:Ms},{id:3,title:"Original Winter Jacket 2XL",amount:"₦29,500",date:"Sat, 06 Jan 2026",type:"credit",img:Ts}];function Ds(){return e.jsx("div",{className:"container py-3 ",style:{maxWidth:420},children:e.jsxs("div",{className:"card shadow-sm p-2",style:{border:"2px solid skyblue"},children:[e.jsx("div",{className:"d-flex justify-content-center mb-1",children:e.jsx("p",{className:"fw-bold",children:"My Pay"})}),e.jsx("p",{className:"text-start fw-semibold",children:"Overview"}),e.jsx("div",{className:"card shadow-sm mb-3 p-3",style:{border:"1px solid red"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"wallet-icon me-2",children:e.jsx(we,{size:18})}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("small",{className:"text-muted",children:"My Sales"}),e.jsx("div",{className:"fw-bold fs-6",children:"₦1,239,187.81"})]}),e.jsx("button",{className:"btn btn-danger btn-sm rounded-pill",children:"Withdraw"})]})}),e.jsx("div",{className:"fw-semibold mb-2",children:"History"}),e.jsx("div",{className:" ",children:Ls.map(i=>e.jsx("div",{className:"card  px-0 p-2 my-1 border-0 ",style:{backgroundColor:"#ecececb7"},children:e.jsxs("div",{className:"d-flex align-items-center px-2",children:[e.jsx("img",{src:i.img,alt:"product",className:"rounded me-2",width:44,height:44}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("small",{className:"text-muted",children:i.date}),e.jsx("div",{className:"fw-semibold small",children:i.title}),e.jsx("div",{className:"fw-semibold text-muted",children:i.amount})]}),e.jsx("div",{className:"text-end",children:i.type==="credit"?e.jsx(Ps,{size:14,className:"text-success"}):e.jsx(zs,{size:14,className:"text-danger"})})]})},i.id))}),e.jsx("style",{children:`
        .wallet-icon {
          width: 36px;
          height: 36px;
          border-radius: 10px;
          background: #eaf2ff;
          display: flex;
          align-items: center;
          justify-content: center;
          color: #0d6efd;
        }
      `})]})})}const{avatar:be}=ee,Is=[{from:"seller",text:"Good afternoon, item still available.",time:"4:20 PM"},{from:"buyer",text:"How much is the last price?",time:"4:24 PM"},{from:"seller",text:"₦15,500 final, delivery available.",time:"5:20 PM"},{from:"buyer",text:"Alright, i will be expecting it tomorrow.",time:"6:48 PM"}];function $s(){const[i,o]=s.useState(0),[d,m]=s.useState(Is),[u,b]=s.useState(""),[N,y]=s.useState(!1),[c,j]=s.useState(!1),[E,C]=s.useState("Voice Narration"),[g,h]=s.useState(!1),n=s.useRef(null),I=s.useRef([]),[t,M]=s.useState(!1),[A,$]=s.useState(!1),w=s.useRef(null);s.useRef(0);const q=new Array(38).fill(1),L=()=>{w.current&&(N?w.current.pause():w.current.play(),y(!N))},O=()=>{u.trim()&&(m([...d,{from:"buyer",text:u}]),b(""))},D=async()=>{if(g){n.current.stop(),h(!1);return}try{const v=await navigator.mediaDevices.getUserMedia({audio:!0}),k=new MediaRecorder(v);n.current=k,I.current=[],k.ondataavailable=x=>{x.data.size>0&&I.current.push(x.data)},k.onstop=()=>{const x=new Blob(I.current,{type:"audio/webm"}),a=URL.createObjectURL(x);m(S=>[...S,{from:"buyer",audio:a,type:"voice"}])},k.start(),h(!0)}catch{alert("Microphone permission denied")}};return e.jsxs("div",{className:"container px-0",style:{maxWidth:420},children:[e.jsxs("div",{className:"row m-2",children:[e.jsxs("div",{className:"col-8 text-muted small d-flex align-items-center",children:[e.jsx("img",{src:be,alt:"user",className:"rounded-circle ",style:{width:70,height:70,objectFit:"cover"}}),e.jsxs("div",{className:"ms-1 py-0",children:[e.jsx("h5",{children:"Dan Joe"}),e.jsx("small",{className:"d-block",children:"090887733"}),e.jsx(ds,{size:18,className:" pe-1"}),"Lagos, Nigeria"]})]}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsx(os,{size:25,className:"text-primary",onClick:()=>j(!0)})}),e.jsx("div",{className:"col-6",children:e.jsx(ms,{size:30,className:"text-primary"})})]})})]}),e.jsx("hr",{className:"text-mte"}),e.jsxs("div",{children:[e.jsx("div",{className:"voice-wave my-3",onClick:L,children:e.jsxs("div",{className:"d-flex",children:[e.jsx("img",{src:be,alt:"user",className:"rounded-circle me-2",style:{width:30,height:30,objectFit:"cover"}}),N?e.jsx(xs,{size:23,className:"text-dark mt-1"}):e.jsx(hs,{size:23,className:"text-dark mt-1"}),e.jsx("div",{className:`wave ${N?"playing":""}`,children:q.map((v,k)=>e.jsx("span",{},k))}),e.jsx("small",{className:"text-end text-muted ms-3",children:"7:00Pm"})]})}),e.jsx("audio",{ref:w,src:"/voice-sample.mp3"})]}),e.jsx("div",{className:"chat-box p-1 ",style:{height:"400px"},children:d.map((v,k)=>e.jsxs("div",{className:`chat-msg ${v.from==="buyer"?"me":""}`,children:[v.type==="voice"?e.jsx("audio",{controls:!0,src:v.audio,style:{width:"200px"}}):e.jsx(e.Fragment,{children:v.text}),e.jsx("small",{className:` ${v.from==="buyer"?"text-end text-white":"text-start text-muted "} ms-2 d-block`,children:v.time})]},k))}),e.jsxs("div",{className:"chat-input d-flex justify-content-between align-items-center   border-top mx-3",children:[e.jsx(me,{size:40,className:`btn ${g?"btn-danger":"btn-primary"} text-white`,style:{width:64,height:50,borderRadius:"50%"},onClick:D}),e.jsx("button",{className:"btn btn-sm btn-outline-primary rounded-pill px-3 mx-2",children:"Buy"}),e.jsx("input",{className:"form-control form-control-sm rounded-pill",placeholder:"Type a message",value:u,onChange:v=>b(v.target.value)}),e.jsx("button",{className:"btn btn-primary btn-sm ms-2",onClick:O,children:e.jsx(qe,{size:16})})]}),c&&e.jsx("div",{className:"call-overlay",children:e.jsxs("div",{className:"call-card",children:[e.jsx("h6",{children:"Calling Seller…"}),e.jsx("button",{className:"btn btn-danger mt-3",onClick:()=>j(!1),children:"End Call"})]})})]})}const{google:Bs,phone:qs,jewelShop:Os,bags:Us,avatar:Ws,defaultProduct:Hs}=ee,Js=[{id:1,view:300,img:Bs},{id:2,view:500,img:qs},{id:3,view:700,img:Os},{id:4,view:200,img:Us}],Vs=i=>new Date(i).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}).toLowerCase();function Qs(){const[i,o]=s.useState("New"),d=V(),[m,u]=s.useState({}),{data:b=[],isLoading:N,error:y}=le({queryKey:[`${Oe}`]});return console.log(b?.data?.items),e.jsxs("div",{className:"container px-0",style:{maxWidth:420},children:[e.jsx("div",{className:"d-flex justify-content-between align-items-center p-3 border-bottom"}),e.jsx("div",{className:"px-3 py-2",children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx(me,{className:"text-white me-2 btn btn-primary",style:{width:42,height:42,borderRadius:"50%"}}),e.jsx("input",{className:"form-control bg-light border-0 rounded-pill",placeholder:"Search chats"}),e.jsx(Ne,{className:"text-white ms-2 btn btn-primary",style:{width:42,height:42,borderRadius:"50%"}})]})}),e.jsxs("div",{className:"px-3 mt-2",children:[e.jsx("small",{className:"text-muted",children:"Recently viewed"}),e.jsx("div",{className:"d-flex gap-3 mt-2 overflow-auto ",children:Js.map(c=>e.jsxs("div",{className:"text-center position-relative",children:[e.jsx("img",{src:c.img,className:"rounded",width:"80",height:"120",alt:""}),e.jsxs("div",{className:"position-absolute fw-bold text-center text-white",style:{bottom:"10px",left:"25px"},children:[e.jsx(ae,{size:20}),e.jsx("small",{className:"d-block ",children:c.view})]})]},c.id))})]}),e.jsx("div",{className:"px-3 mt-3",children:e.jsx("div",{className:"filter-pill fw-semibold",children:["New","Pending"].map(c=>e.jsx("span",{className:`filter-item ${i===c?"active text-primary":"text-white"}`,onClick:()=>o(c),children:c},c))})}),e.jsx("div",{className:"mt-3",children:b?.data?.items.map(c=>e.jsxs("div",{className:"d-flex align-items-center px-3 py-2 chat-row",onClick:()=>d(`/dashboard/chat/${c.product?.id}/${c.participants[1]?.user.id}/${c.participants[0]?.user.id}`),children:[e.jsx("img",{src:c.product?.images[0]?.url||Hs,className:"rounded-circle me-3",width:"48",height:"48",alt:""}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("h6",{className:"mb-0",children:c?.product?.name}),e.jsx("small",{className:"text-muted",children:Vs(c.product?.createdAt)})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("img",{src:Ws,alt:"user",className:"rounded-circle ",style:{width:30,height:30,objectFit:"cover"}}),e.jsx("small",{className:"text-muted",children:c.messages[0]?.content}),c.unreadCount>0?e.jsx("span",{className:"badge bg-primary rounded-pill",children:c.unreadCount}):e.jsx(fs,{size:16,className:"text-primary"})]})]})]},c.id))})]})}const X=["https://images.unsplash.com/photo-1527980965255-d3b416303d12","https://images.unsplash.com/photo-1527980965255-d3b416303d12","https://images.unsplash.com/photo-1527980965255-d3b416303d12"];function _s(){const[i,o]=s.useState(!1),[d,m]=s.useState(0),[u,b]=s.useState(!1);s.useEffect(()=>{document.body.style.overflow=i?"hidden":"auto"},[i]);const N=j=>{m(j),o(!0)},y=()=>m(j=>(j+1)%X.length),c=()=>m(j=>(j-1+X.length)%X.length);return e.jsxs("div",{className:"container py-3",style:{maxWidth:420},children:[e.jsxs("div",{className:"position-relative rounded-2 ",children:[e.jsx("img",{src:"https://images.unsplash.com/photo-1527980965255-d3b416303d12",alt:"profile",className:"w-100",style:{height:250,objectFit:"cover"}}),e.jsx(ve,{size:24,className:"share-profile text-white",role:"button",onClick:()=>b(!u)}),u&&e.jsx("div",{className:"dropdown-menu-custom p-3",children:e.jsx("div",{className:"dropdown-item",children:"Share Profile"})}),e.jsx("div",{className:"position-absolute w-100 px-3  translate-middle-y",children:e.jsx("div",{className:"card border-0 shadow text-white",style:{borderRadius:"18px",background:"linear-gradient(180deg, #0d6efd 0%, #0b5ed7 100%)",opacity:.9},children:e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{children:"John Doe"}),e.jsxs("h5",{className:"fw-bold mb-1",children:["jo****@*****.com"," ",e.jsx(ye,{size:10,className:"text-white"})]})]}),e.jsx("div",{className:"d-flex gap-2"})]}),e.jsxs("div",{className:"bg-white text-dark  p-3",style:{borderRadius:14},children:[e.jsxs("div",{className:"row g-2 small mb-2",children:[e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Username"}),e.jsx("div",{className:"fw-semibold",children:"jo***"})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Store"}),e.jsx("div",{className:"fw-semibold",children:"Sango Ota"})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Rating"}),e.jsxs("div",{className:"fw-semibold",children:[e.jsx(ie,{size:14,className:"text-warning"}),e.jsx(ie,{size:14,className:"text-warning"}),e.jsx(ie,{size:14,className:"text-warning"})," 4.5"]})]})]}),e.jsxs("div",{className:"row g-2 mb-2 small",children:[e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Address"}),e.jsx("div",{className:"fw-semibold",children:"Sango Ota"})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Phone"}),e.jsx("div",{className:"fw-semibold",children:"07******677"})]})]})]})]})})})]}),e.jsxs("div",{className:"mb-3 mt-5 py-5",children:[e.jsx("div",{className:"card shadow mt-4",style:{backgroundColor:"#e8f8e8"},children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 px-3",children:[e.jsxs("div",{className:"px-2 text-center fw-semibold",children:[e.jsx("small",{children:"33"}),e.jsx("p",{children:"Transaction"})]}),e.jsxs("div",{className:"p-1 text-center fw-semibold",children:[e.jsx("small",{children:"33"}),e.jsx("p",{children:"Trust Score"})]}),e.jsxs("div",{className:"p-1 text-center fw-semibold",children:[e.jsx("small",{children:"33"}),e.jsx("p",{children:"Reviews Given"})]})]})}),e.jsx("div",{className:"fw-semibold small mb-2 mt-4",children:"Photos"}),e.jsx("div",{className:"row g-2",children:X.map((j,E)=>e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"position-relative",children:[e.jsx("div",{className:"photo-tile",onClick:()=>N(E),children:e.jsx("img",{src:j,alt:"gallery"})}),e.jsx("div",{className:"position-absolute fw-bold text-center text-white",style:{bottom:"10px",left:"45px"},children:e.jsx("small",{className:"d-block ",children:"455"})})]})},E))})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"btn btn-danger rounded-pill px-5",children:"Block User"})}),i&&e.jsxs("div",{className:"photo-viewer",children:[e.jsx("img",{src:X[d],alt:"fullscreen"}),e.jsx("button",{className:"close-btn",onClick:()=>o(!1),children:e.jsx(se,{size:24})}),e.jsx("button",{className:"nav-btn left",onClick:c,children:e.jsx(us,{size:28})}),e.jsx("button",{className:"nav-btn right",onClick:y,children:e.jsx(R,{size:28})})]})]})}function Ks({openSellerForm:i,setOpenSellerForm:o}){const d=V(),[m,u]=s.useState(0),[b,N]=s.useState(!1);s.useRef(0);const[y,c]=s.useState(Array(11).fill("")),[j,E]=s.useState(Array(11).fill("")),C=s.useRef([]),g=s.useRef([]);console.log(j.join(""));const h=(r,p,P,Q,U)=>{if(!/^[0-9]?$/.test(p))return;const W=[...P];W[r]=p,Q(W),p&&U.current[r+1]&&U.current[r+1].focus()},[n,I]=s.useState({firstName:"",lastName:"",bankNumber:"",bankName:"",businessName:"",businessEmail:"kunle@gmail.com",businessType:"",address:"",phone:"+234",regNumber:"",agree:!1}),[t,M]=s.useState({}),[A,$]=s.useState("https://i.pravatar.cc/100"),[w,q]=s.useState(!1),{mutate:L,isPending:O,isError:D,error:v,isSuccess:k,data:x}=G({mutationFn:r=>Z.post(Ue,r),onSuccess:r=>{console.log(r),K.success("Seller created successfully",{autoClose:2e3,onClose:()=>d("/dashboard/agent/tap-to-sell")})},onError:r=>{K.error(`✅ ${r?.message}`,{autoClose:2e3}),q(!1),console.log(r)}}),a=r=>{const{name:p,value:P,type:Q,checked:U}=r.target;I(W=>({...W,[p]:Q==="checkbox"?U:P}))},S=()=>{const r={};return/\S+@\S+\.\S+/.test(n.businessEmail)||(r.email="Enter valid email"),n.phone&&n.phone.length<10&&(r.phone="Enter valid phone"),n.firstName.length===0&&(r.firstName="Enter first name"),n.lastName.length===0&&(r.lastName="Enter last name"),n.address.length===0&&(r.address="Enter address"),n.regNumber.length===0&&(r.regNumber="Enter Reg number"),n.businessType.length===0&&(r.businessType="please choose a  business type"),n.businessName.length===0&&(r.businessName="please your business name"),(n.bankNumber.length===0||n.bankNumber.length<10)&&(r.bankNumber="Enter correct bank number"),n.bankName.length===0&&(r.bankName="Enter account name"),j.join("").length<11&&(r.nin="nin number must be up to 11 "),y.join("").length<11&&(r.bvn="Bvn number must be up to 10 "),r},z=()=>{N(!1),u(0),o(!1)},l=r=>{const p=r.target.files[0];p&&$(URL.createObjectURL(p))},F=r=>{r.preventDefault();const p=S();M(p);const P={firstName:n.firstName,lastName:n.lastName,businessName:n.businessName,phone:n.phone,location:"Abuja",businessCategory:n.businessType,businessPhone:n.phone,businessEmail:n.businessEmail,businessAddress:n.address,nin:j.join(""),bvn:y.join(""),bankAccountNo:n.bankNumber,bankName:n.bankName,commissionRate:5};console.log(),console.log(t),Object.keys(p).length===0&&(L(P),q(!0))};return e.jsxs("div",{className:"bg-light min-vh-100 p-3",children:[i&&e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100",style:{background:"rgba(0,0,0,.45)",zIndex:999}}),i&&e.jsxs("div",{className:"position-fixed start-50 translate-middle-x bg-white shadow",style:{bottom:0,width:"95%",maxWidth:420,maxHeight:"85vh",borderRadius:"22px 22px 0 0",zIndex:1e3,transform:`translate(-50%, ${m}px)`,transition:b?"none":"transform .35s cubic-bezier(.25,1,.5,1)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"bg-white",style:{position:"sticky",top:0,zIndex:2,borderRadius:"22px 22px 0 0"},children:[e.jsx("div",{className:"py-2",children:e.jsx("div",{className:"mx-auto bg-secondary",style:{width:40,height:4,borderRadius:2,opacity:.4}})}),e.jsx("div",{className:"d-flex justify-content-end align-items-center px-3 pb-2 border-bottom",children:e.jsx(se,{style:{cursor:"pointer"},onClick:z})})]}),e.jsxs("div",{className:"px-3 py-3",style:{overflowY:"auto",WebkitOverflowScrolling:"touch"},children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h5",{children:"Onboard New Registration"}),e.jsx("span",{className:"text-muted",children:"Please use your real information for this registartion"})]}),e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsxs("div",{className:"text-center mb-3 position-relative",children:[e.jsx("img",{src:A,alt:"avatar",className:"rounded-circle",width:80,height:80}),e.jsxs("label",{className:"btn btn-primary btn-sm rounded-circle position-absolute",style:{bottom:0,right:"38%"},children:[e.jsx(xe,{size:14}),e.jsx("input",{type:"file",hidden:!0,onChange:l})]})]})}),e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:" row mb-2",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"firstName",className:"form-label text-dark",children:"First Name"}),e.jsx("span",{className:"text-danger",children:"*"}),e.jsx("input",{className:"form-control form-control-sm",name:"firstName",id:"firstName",value:n.firstName,onChange:a}),t.firstName&&e.jsx("div",{className:"invalid-feedback d-block",children:t.firstName})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"form-label text-dark",htmlFor:"lastName",children:"Last Name"})," ",e.jsx("span",{className:"text-danger",children:"*"}),e.jsx("input",{className:"form-control form-control-sm",name:"lastName",id:"lastName",value:n.lastName,onChange:a}),t.lastName&&e.jsx("div",{className:"invalid-feedback d-block",children:t.lastName})]})]}),e.jsxs("div",{className:" row mb-2",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"phone",className:"form-label text-dark",children:"Phone Number"})," ",e.jsx("span",{className:"text-danger",children:"*"}),e.jsx("input",{className:"form-control form-control-sm",name:"phone",id:"phone",value:n.phone,onChange:a})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"form-label text-dark",htmlFor:"businessType",children:"Business Type"})," ",e.jsx("span",{className:"text-danger",children:"*"}),e.jsxs("select",{name:"businessType",id:"businessType",className:"form-select-sm",value:n.businessType,onChange:a,children:[e.jsx("option",{value:""}),e.jsx("option",{value:"electronics",children:"Electronics"}),e.jsx("option",{value:"fashion",children:"Fashion"})]})]})]}),e.jsxs("div",{className:" row mb-2",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"businessName",className:"form-label text-dark",children:"Business Name"}),e.jsx("input",{className:"form-control form-control-sm",name:"businessName",id:"businessName",value:n.businessName,onChange:a})," ",t.businessName&&e.jsx("div",{className:"invalid-feedback d-block",children:t.businessName})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"form-label text-dark",htmlFor:"regNumber",children:"Registration Number"}),e.jsx("input",{className:"form-control form-control-sm",name:"regNumber",id:"regNumber",value:n.regNumber,onChange:a}),t.regNumber&&e.jsx("div",{className:"invalid-feedback d-block",children:t.regNumber})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label text-dark",htmlFor:"address",children:"Operation Business address"})," ",e.jsx("span",{className:"text-danger",children:"*"}),e.jsx("input",{className:"form-control form-control-sm",name:"address",id:"address",value:n.address,onChange:a}),t.address&&e.jsx("div",{className:"invalid-feedback d-block",children:t.address})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label text-dark",children:"National Identity Number (NIN)"}),e.jsx("div",{className:"d-flex gap-1",children:j.map((r,p)=>e.jsx("input",{ref:P=>g.current[p]=P,value:r,maxLength:1,className:"digit-input",onChange:P=>h(p,P.target.value,j,E,g)},p))}),e.jsxs("div",{className:"text-center my-2",children:[e.jsxs("button",{type:"button",className:"rounded-pill btn btn-sm btn-primary pe-3",children:[e.jsx(oe,{size:15})," check"]}),t.nin&&e.jsx("div",{className:"invalid-feedback d-block",children:t.nin})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label text-dark",children:"Bank Verification Number (BVN)"}),e.jsx("div",{className:"d-flex gap-1",children:y.map((r,p)=>e.jsx("input",{ref:P=>C.current[p]=P,value:r,maxLength:1,className:"digit-input",onChange:P=>h(p,P.target.value,y,c,C)},p))}),e.jsxs("div",{className:"text-center my-2",children:[e.jsxs("button",{type:"button",className:"rounded-pill btn btn-sm btn-primary pe-3",children:[e.jsx(oe,{size:15})," check"]}),t.bvn&&e.jsx("div",{className:"invalid-feedback d-block",children:t.bvn})]})]}),e.jsxs("div",{className:" row mb-2",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"bankNumber",className:"form-label text-dark",children:"Account Number"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",name:"bankNumber",id:"bankNumber",value:n.bankNumber,onChange:a}),t.bankNumber&&e.jsx("div",{className:"invalid-feedback d-block",children:t.bankNumber})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"form-label text-dark",htmlFor:"bankName",children:"Bank"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",name:"bankName",id:"bankName",value:n.bankName,onChange:a}),t.bankName&&e.jsx("div",{className:"invalid-feedback d-block",children:t.bankName})]})]}),e.jsxs("div",{className:"form-check mb-3",children:[e.jsx("input",{type:"checkbox",className:`form-check-input  ${t.agree?"is-invalid":""} `,id:"terms",name:"agree",checked:n.agree,onChange:a}),e.jsx("label",{className:"form-check-label text-muted text-justify",children:"I hereby consent to the collection, use, storage, and processing of my personal and business information by Afomo and its authorized agents for seller onboarding, verification (KYC), account management, and related operation purposes. I confirmed that the information provided is true and accurate, and I understand that my data will be handled in accordance with protection laws and Federal Republic of Nigeria and Afomo's Privacy policy"}),e.jsx("span",{className:"text-danger",children:t.agree&&"Please agree on terms and conditions"})]}),e.jsxs("button",{type:"submit",disabled:w,className:"btn btn-primary w-100 btn-sm d-flex align-items-center justify-content-center gap-2 rounded-pill",onClick:()=>F(),children:[e.jsx(Ns,{size:14})," ",w?"Saving...":"Save"]})]})]})]})]})}const Ys=()=>{const{user:i}=_(),o=JSON.parse(i),d=V(),[m,u]=s.useState(!1);return e.jsxs("div",{className:"container d-flex justify-content-center py-3",children:[e.jsx("div",{className:"card dashboard-card",children:e.jsxs("div",{className:"card-body p-3",children:[e.jsx("div",{className:"text-start mb-3",children:e.jsxs("small",{className:"text-muted",children:["Welcome, ",o.username]})}),e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"fw-semibold small mb-2",children:"Quick Actions"})}),e.jsxs("div",{className:"row g-2 ",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"card shadow-sm justify-items-between align-items-center pt-2",style:{backgroundColor:"#badff7",height:90,width:95},onClick:()=>d("seller/tap-to-sell"),children:[e.jsx("div",{className:"text-center",style:{backgroundColor:"#5bb4f0",borderRadius:"50%",width:32,height:32,opacity:.8},children:e.jsx(me,{size:15,className:"text-white"})}),e.jsx("small",{className:"text-dark text-center fw-semibold ",children:"Add New Product"})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"card shadow-sm justify-items-between align-items-center pt-2",style:{backgroundColor:"#badff7",height:90,width:95},onClick:()=>d("/dashboard/seller/manage-listing"),children:[e.jsx("div",{className:"text-center",style:{backgroundColor:"#5bb4f0",borderRadius:"50%",width:32,height:32,opacity:.8},children:e.jsx(gs,{size:15,className:"text-white"})}),e.jsx("small",{className:"text-dark text-center fw-semibold py-2",children:"Manage Listing"})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"card shadow-sm justify-items-between align-items-center pt-2",style:{backgroundColor:"#badff7",height:90,width:95},children:[e.jsx("div",{className:"text-center",style:{backgroundColor:"#5bb4f0",borderRadius:"50%",width:32,height:32,opacity:.8},children:e.jsx(we,{size:15,className:"text-white"})}),e.jsx("small",{className:"text-dark text-center fw-semibold pt-2",children:"Wallet"})]})})]}),e.jsxs("div",{className:"row g-2 mt-4",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"card shadow-sm justify-items-between align-items-center pt-2",style:{backgroundColor:"#badff7",height:90,width:95},onClick:()=>d("seller/profile"),children:[e.jsx("div",{className:"text-center",style:{backgroundColor:"#5bb4f0",borderRadius:"50%",width:32,height:32,opacity:.8},children:e.jsx(We,{size:15,className:"text-white"})}),e.jsx("small",{className:"text-dark text-center fw-semibold pt-2",children:"Profile"})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"card shadow-sm justify-items-between align-items-center pt-2",style:{backgroundColor:"#badff7",height:90,width:95},children:[e.jsx("div",{className:"text-center",style:{backgroundColor:"#5bb4f0",borderRadius:"50%",width:32,height:32,opacity:.8},children:e.jsx(vs,{size:15,className:"text-white"})}),e.jsx("small",{className:"text-dark text-center fw-semibold pt-2",children:"Complaints"})]})})]}),e.jsxs("div",{className:"row g-2 mb-3 mt-3",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"card shadow-sm justify-items-between align-items-center pt-2 text-white",style:{backgroundColor:"#9a55e9",height:110,width:155,opacity:.9},children:[e.jsx("div",{className:"text-center",style:{backgroundColor:"#6110ad",borderRadius:"50%",width:32,height:32,opacity:.8},children:e.jsx(je,{size:15,className:"text-white"})}),e.jsx("small",{children:"Total Sales"}),e.jsx("h4",{children:"₦34,010.98"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"card shadow-sm justify-items-between align-items-center pt-2 text-white",style:{backgroundColor:"#46d4e7d7",height:110,width:155,opacity:.9},children:[e.jsx("div",{className:"text-center",style:{backgroundColor:"#4d86ee",borderRadius:"50%",width:32,height:32,opacity:.8},children:e.jsx(je,{size:15,className:"text-white"})}),e.jsx("small",{children:"Total Listings"}),e.jsx("h4",{children:"66"})]})})]})]})}),m&&e.jsx(Ks,{openSellerForm:m,setOpenSellerForm:u})]})};function Xs(){const{transcript:i}=ge();console.log(i);const{user:o}=_(),d=JSON.parse(o),[m,u]=s.useState(!1),b=s.useRef(null),N=V(),[y,c]=s.useState([]),[j,E]=s.useState({});s.useRef(null),s.useRef(null),s.useRef(null);const C=s.useRef(""),g=s.useRef(null),[h,n]=s.useState([]),I=l=>{const F=Array.from(l).map(r=>({file:r,url:URL.createObjectURL(r)}));c(r=>[...r,...F])},[t,M]=s.useState({name:"",price:"",description:"",quantity:"",status:"ACTIVE"}),A=l=>{c(y.filter((F,r)=>r!==l))},$=()=>{const l={};return t.name||(l.name=!0),t.price||(l.price=!0),t.quantity||(l.quantity=!0),t.description||(l.description=!0),E(l),Object.keys(l).length===0},{mutate:w,isPending:q,data:L}=G({mutationFn:l=>Z.post(He,l),onSuccess:l=>{n(l?.data)},onError:l=>{console.log(l)}}),{mutate:O,isPending:D,isError:v,error:k,isFetching:x,isSuccess:a,data:S}=G({mutationFn:l=>Z.post(Je,l,{headers:{"Content-Type":"multipart/form-data"}}),onSuccess:l=>{console.log(l),K.success("product created successfully",{autoClose:2e3,onClose:()=>N("/dashboard/seller/tap-to-sell")})},onError:l=>{console.error(" error:",l)}});console.log(h),s.useEffect(()=>{if(!i||i.trim().length<5)return;const{productName:l,price:F,description:r}=h;M({name:l||"",price:F||"",description:r||"",quantity:"",status:"ACTIVE"}),g.current=setTimeout(()=>{if(C.current===i)return;C.current=i,w({text:i})},800)},[i,w,q]),console.log(y);const z=()=>{if(!$())return;const l=new FormData;l.append("name",t.name),l.append("price",t.price),l.append("description",t.description),l.append("quantity",t.quantity),l.append("status",t.status),y.forEach(F=>{l.append("images",F.file)}),O(l),u(!0)};return console.log(t),e.jsx("div",{className:"bg-light min-vh-80 d-flex flex-column",children:e.jsxs("div",{className:"px-3 mt-3",style:{maxWidth:420,width:"100%"},children:[e.jsxs("p",{className:"small text-muted",children:["Welcome, ",e.jsx("strong",{children:d?.username})]}),e.jsxs("div",{className:"card border-0 shadow-sm rounded-4 p-3",children:[e.jsx(re,{label:"Product Name",value:t.name,onChange:l=>M({...t,name:l})}),e.jsx(Gs,{label:"Description",value:t.description,onChange:l=>M({...t,description:l})}),e.jsx(re,{label:"Price",value:t.price,onChange:l=>M({...t,price:l})}),e.jsx(re,{label:"Quantity",value:t.quantity,onChange:l=>M({...t,quantity:l})}),t.name.length!==0&&e.jsxs("div",{className:"text-center my-2",children:[e.jsx("button",{className:"btn btn-sm btn-primary rounded-pill mx-3",children:e.jsx("span",{className:"px-2",children:"yes"})}),e.jsx("button",{className:"btn btn-sm btn-outline-primary rounded-pill px-2",children:e.jsx("span",{className:"px-2",children:"edit"})})]}),e.jsxs("div",{className:"border rounded p-3 text-center mb-3 bg-light",onClick:()=>b.current.click(),style:{cursor:"pointer"},children:[e.jsx(xe,{size:30,className:"mb-2"}),e.jsx("div",{className:"small text-muted",children:"Tap to take photo or video"})]}),e.jsx("input",{type:"file",hidden:!0,multiple:!0,accept:"image/*,video/*",ref:b,onChange:l=>I(l.target.files)}),y.length>0&&e.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:y.map((l,F)=>e.jsxs("div",{className:"position-relative",children:[e.jsx("img",{src:l.url,alt:"",width:70,height:70,className:"rounded object-fit-cover"}),e.jsx(se,{size:14,className:"position-absolute top-0 end-0 bg-dark text-white rounded-circle p-1",role:"button",onClick:()=>A(F)})]},F))}),e.jsx("button",{className:"btn btn-primary w-100 rounded-pill",disabled:m,onClick:z,children:m?e.jsx(ke,{className:"spin"}):"Post"})]})]})})}function re({label:i,value:o,onChange:d}){return e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{className:"form-label small text-muted",children:i}),e.jsx("input",{className:"form-control rounded-3",value:o,onChange:m=>d(m.target.value)})]})}function Gs({label:i,value:o,onChange:d}){return e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{className:"form-label small text-muted",children:i}),e.jsx("textarea",{className:"form-control rounded-3",rows:2,value:o,onChange:m=>d(m.target.value)})]})}const{defaultProduct:Zs}=ee;function et(){const{user:i}=_(),o=JSON.parse(i),[d,m]=s.useState(""),[u,b]=s.useState(null),[N,y]=s.useState(!1),[c,j]=s.useState([]),{token:E}=_(),[C,g]=s.useState(1),[h]=s.useState(10),[n,I]=s.useState(""),[t,M]=s.useState(""),[A,$]=s.useState(!1),w=V(),q=(x,a)=>{if(x.length<=a)return e.jsx("p",{children:x});const S=`${x.substring(0,a)}...`;return e.jsx("p",{children:S})},{data:L,isLoading:O,isFetching:D}=le({queryKey:["seller-products",C,t],queryFn:async()=>(await fetch(`https://afomo-xagx.onrender.com/api${de}?status=ACTIVE&page=${C}&pageSize=${h}&search=${t}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`}})).json(),keepPreviousData:!0}),v=L?.data?.items||[],k=L?.data?.totalPages||1;return console.log(v),e.jsxs("div",{className:"container py-3",style:{maxWidth:450},children:[e.jsx("div",{className:"px-2 pt-2",children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("span",{className:"input-group-text bg-white",children:e.jsx(Ne,{size:16})}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Search products...",value:t,onChange:x=>M(x.target.value)}),n&&e.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>M(""),children:e.jsx(se,{size:14})})]})}),e.jsx("h6",{className:"fw-bold mb-0 flex-grow-1 text-center py-3",children:"Manage Listing"}),e.jsx("div",{className:"row g-2",children:O?e.jsx(Ve,{}):e.jsxs(e.Fragment,{children:[v.map(x=>e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"product-card shadow-sm bg-white rounded-3 position-relative",children:[e.jsxs("div",{className:"product-image-wrapper position-relative",children:[e.jsx("img",{src:x.images[0]?.url||Zs,alt:x.name}),e.jsxs("div",{className:"p-1 text-center position-absolute bottom-0 start-0  w-100",style:{backgroundColor:"#1e98e9",opacity:.9,borderBottomLeftRadius:"10px",borderBottomRightRadius:"10px"},children:[" ",e.jsxs("div",{className:"d-flex justify-content-between align-items-center mx-2",children:[e.jsxs("span",{className:"text-white",children:[x.quantity," Sold"]}),e.jsx(ys,{size:15,className:"text-white bg-danger",onClick:()=>{m(x.id),$(!A)}})]})]})]}),e.jsxs("div",{className:"px-2 py-2 d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:"product-name ",children:q(x.name,15)}),x.price," ",e.jsx("del",{className:" text-muted small",children:e.jsx("small",{children:"14,000"})})]}),e.jsx(ws,{className:"text-end  text-primary",size:15,onClick:()=>w(`/dashboard/edit-product/${x.id}`)})]})]})},x.id)),D&&!O&&e.jsx("div",{className:"text-center small py-1 text-muted",children:"Searching..."})]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3 px-2",children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary",disabled:C===1||D,onClick:()=>g(x=>x-1),children:"Prev"}),e.jsxs("span",{className:"small fw-semibold",children:["Page ",C," of ",k]}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",disabled:C===k||D,onClick:()=>g(x=>x+1),children:"Next"})]}),A&&e.jsx(ks,{showDeleteModal:A,setShowDeleteModal:$,sellerId:"",productId:d,bName:"",userJson:o})]})}function st(){const{user:i}=_();JSON.parse(i);const[o,d]=s.useState(!1),m=s.useRef(null),u=V(),[b,N]=s.useState([]),[y,c]=s.useState({}),{productId:j}=ge();s.useRef(null),s.useRef(null),s.useRef(null);const E=a=>{const S=Array.from(a).map(z=>({file:z,url:URL.createObjectURL(z)}));N(z=>[...z,...S])},C=a=>{N(b.filter((S,z)=>z!==a))},g=a=>{n({...h,[a.target.name]:a.target.value})},[h,n]=s.useState({name:"",price:"",description:"",quantity:"",images:"",status:"ACTIVE"}),I=()=>{const a={};return h.name||(a.name=!0),h.price||(a.price=!0),h.quantity||(a.quantity=!0),h.description||(a.description=!0),c(a),Object.keys(a).length===0},{data:t=[],isLoading:M,error:A,isFetching:$}=le({queryKey:[`${de}/${j}`]});console.log(t?.data),s.useEffect(()=>{if(!$&&t){const{name:a,price:S,description:z,quantity:l}=t?.data;n({name:a||"",price:S||"",description:z||"",quantity:l||"",status:"ACTIVE"})}},[$,t]);const{mutate:w,isPending:q,isError:L,error:O,isFetching:D,isSuccess:v,data:k}=G({mutationFn:a=>Z.put(`${de}/${j}`,a,{headers:{"Content-Type":"multipart/form-data"}}),onSuccess:a=>{console.log(a),K.success("product updated successfully",{autoClose:2e3,onClose:()=>u("/dashboard/seller/manage-listing")})},onError:a=>{console.error(" error:",a)}}),x=()=>{if(!I())return;const a=new FormData;a.append("name",h.name),a.append("price",h.price),a.append("description",h.description),a.append("quantity",h.quantity),a.append("status",h.status),b.forEach(S=>{a.append("images",S.file)}),w(a),d(!0),setTimeout(()=>{d(!1)},1500)};return e.jsx("div",{className:"bg-light min-vh-80 d-flex flex-column",children:e.jsx("div",{className:"px-3 mt-3",style:{maxWidth:420,width:"100%"},children:e.jsxs("div",{className:"card border-0 shadow-sm rounded-4 p-3",children:[e.jsx(ce,{label:"Product Name",value:t?.data?.name,name:"name",onChange:g}),e.jsx(tt,{label:"Description",name:"description",value:h.description,onChange:g}),e.jsx(ce,{label:"Price",value:h.price,name:"price",onChange:g}),e.jsx(ce,{label:"Quantity",name:"quantity",value:h.quantity,onChange:g}),e.jsxs("div",{className:"border rounded p-3 text-center mb-3 bg-light",onClick:()=>m.current.click(),style:{cursor:"pointer"},children:[e.jsx(xe,{size:30,className:"mb-2"}),e.jsx("div",{className:"small text-muted",children:"Tap to take photo or video"})]}),e.jsx("input",{type:"file",hidden:!0,multiple:!0,accept:"image/*,video/*",ref:m,onChange:a=>E(a.target.files)}),b.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:b.map((a,S)=>e.jsxs("div",{className:"position-relative",children:[e.jsx("img",{src:a.url,alt:"",width:70,height:70,className:"rounded object-fit-cover"}),e.jsx(se,{size:14,className:"position-absolute top-0 end-0 bg-dark text-white rounded-circle p-1",role:"button",onClick:()=>C(S)})]},S))})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:t?.data?.images?.map((a,S)=>e.jsx("div",{className:"position-relative",children:e.jsx("img",{src:a.url,alt:"",width:70,height:70,className:"rounded object-fit-cover"})},a.id))})}),e.jsx("button",{className:"btn btn-primary w-100 rounded-pill",disabled:o,onClick:x,children:o?e.jsx(ke,{className:"spin"}):"Edit"})]})})})}function ce({label:i,value:o,onChange:d,name:m}){return e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{className:"form-label small text-muted",children:i}),e.jsx("input",{className:"form-control rounded-3",value:o,name:m,onChange:d})]})}function tt({label:i,value:o,onChange:d,name:m}){return e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{className:"form-label small text-muted",children:i}),e.jsx("textarea",{className:"form-control rounded-3",rows:2,value:o,name:m,onChange:d})]})}function mt(){return e.jsx(Qe,{children:e.jsxs(B,{path:"/",element:e.jsx(ps,{}),children:[e.jsx(B,{index:!0,element:e.jsx(Ys,{})}),e.jsx(B,{path:"/seller/tap-to-sell",element:e.jsx(Ss,{})}),e.jsx(B,{path:"seller/manage-listing",element:e.jsx(et,{})}),e.jsx(B,{path:"seller/profile",element:e.jsx(Es,{})}),e.jsx(B,{path:"seller/seller-mypay/:id",element:e.jsx(Ds,{})}),e.jsx(B,{path:"chat/:productId/:sellerId/:buyerId",element:e.jsx(js,{})}),e.jsx(B,{path:"seller-chat/",element:e.jsx($s,{})}),e.jsx(B,{path:"seller-chat-display",element:e.jsx(Qs,{})}),e.jsx(B,{path:"add-product/:transcript",element:e.jsx(Xs,{})}),e.jsx(B,{path:"seller/buyer-profile/:id",element:e.jsx(_s,{})}),e.jsx(B,{path:"edit-product/:productId",element:e.jsx(st,{})})]})})}export{mt as default};
