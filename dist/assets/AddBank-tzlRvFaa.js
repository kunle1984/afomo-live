import{i as j,r as n,b as A,j as e,X as $,U as f,d as I,y,p as R}from"./index-BZyEwEIo.js";const D=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],_=j("credit-card",D);const L=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],B=j("star",L);function H({showBankModal:o,setShowBankModal:c,userJson:u,profileData:s,isFetching:r}){const[d,g]=n.useState(0),[v,U]=n.useState(!1);n.useRef(0);const[Y,k]=n.useState(!1),[t,h]=n.useState({});n.useEffect(()=>{if(!r&&s){const{bankAccountNo:a,bankName:i,accountName:l}=s?.data;console.log(s.data),h({accountNumber:a||"",bankName:i,accountName:l||""})}},[r,s]);const[m,C]=n.useState({}),{mutate:E,isPending:N,isError:F,error:w,isSuccess:M,data:O}=A({mutationFn:a=>I.put(`${R}/bank-details`,a),onSuccess:a=>{y.success("✅Bank Added successfully",{autoClose:2e3,onClose:()=>c(!1)})},onError:a=>{y.error(`✅ ${a.message}`,{autoClose:2e3}),console.log(a.message),k(!1)}}),b=a=>{h({...t,[a.target.name]:a.target.value})},p=()=>{const a={};return t.accountNumber&&t.accountNumber.length<10&&(a.accountNumber="Enter valid account number"),t.bankName.length===0&&(a.bankName="Enter bank name"),t.accountName.length===0&&(a.accountName="Enter account name"),a},S=()=>{c(!1)},z=a=>{a.preventDefault();const i=p();if(C(i),Object.keys(i).length===0){const l={...t};console.log(l),E(l),console.log(w)}};return e.jsxs("div",{className:"bg-light min-vh-100 ",children:[o&&e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100",style:{background:"rgba(0,0,0,.45)",zIndex:999}}),o&&e.jsxs("div",{className:"position-fixed start-50 translate-middle-x bg-white shadow",style:{bottom:0,width:"95%",maxWidth:600,maxHeight:"95vh",borderRadius:"22px 22px 0 0",zIndex:1e3,transform:`translate(-50%, ${d}px)`,transition:v?"none":"transform .35s cubic-bezier(.25,1,.5,1)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"bg-white",style:{position:"sticky",top:0,zIndex:2,borderRadius:"22px 22px 0 0"},children:[e.jsx("div",{className:"py-2",children:e.jsx("div",{className:"mx-auto bg-secondary",style:{width:40,height:4,borderRadius:2,opacity:.4}})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center px-3 pb-2 border-bottom",children:[e.jsx("h6",{className:"fw-bold m-0",children:"Add bank details"}),e.jsx($,{style:{cursor:"pointer"},onClick:S})]})]}),e.jsx("div",{className:"px-3 py-3",style:{overflowY:"auto",WebkitOverflowScrolling:"touch"},children:e.jsxs("form",{noValidate:!0,onSubmit:z,children:[e.jsx(x,{label:"Bank Name",name:"bankName",value:t.bankName,error:m.bankName,icon:f,onChange:b}),e.jsx(x,{label:"Account Name",name:"accountName",value:t.accountName,error:m.accountName,icon:f,onChange:b}),e.jsx(x,{label:"Account Number",name:"accountNumber",value:t.accountNumber,error:m.accountNumber,icon:_,onChange:b}),e.jsx("button",{className:"btn btn-primary w-100 mt-2",onClick:p,disabled:N,children:N?"updating...":"update"})]})})]})]})}function x({label:o,value:c,icon:u,error:s,disabled:r,name:d,onChange:g}){return e.jsxs("div",{className:`mb-2 ${s?"shake":""}`,children:[e.jsx("label",{className:"small text-muted",children:o}),e.jsxs("div",{className:"input-group",children:[u&&e.jsx("span",{className:"input-group-text bg-light",children:e.jsx(u,{size:16})}),e.jsx("input",{className:`form-control ${s?"is-invalid":""}`,value:c,name:d,disabled:r,onChange:g})]})]})}export{H as A,B as S};
