import{h as y,r as n,b as z,j as e,X as $,U as f,e as I,y as k,p as R}from"./index-ClbqFBav.js";const D=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],M=y("credit-card",D);const _=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],P=y("star",_);function W({showBankModal:o,setShowBankModal:i,userJson:l,profileData:s,isFetching:c}){const[d,h]=n.useState(0),[j,L]=n.useState(!1);n.useRef(0);const[U,v]=n.useState(!1),[t,g]=n.useState({});n.useEffect(()=>{if(!c&&s){const{bankAccountNo:a,bankName:r,accountName:b}=s?.data;console.log(s.data),g({bankAccountNo:a||"",bankName:r,accountName:b||""})}},[c,s]);const[u,A]=n.useState({}),{mutate:w,isPending:N,isError:Y,error:S,isSuccess:B,data:F}=z({mutationFn:a=>I.put(`${R}/bank-details`,a),onSuccess:a=>{k.success("✅Bank Added successfully",{autoClose:2e3,onClose:()=>setShowProfileModal(!1)})},onError:a=>{k.error(`✅ ${a.message}`,{autoClose:2e3}),console.log(a.message),v(!1)}}),m=a=>{g({...t,[a.target.name]:a.target.value})},p=()=>{const a={};return t.bankAccountNo&&t.bankAccountNo.length<10&&(a.bankAccountNo="Enter valid account number"),t.bankName.length===0&&(a.bankName="Enter bank name"),t.accountName.length===0&&(a.accountName="Enter account name"),a},C=()=>{i(!1)},E=a=>{a.preventDefault();const r=p();if(A(r),Object.keys(r).length===0){const b={...t};console.log(t),w(b),console.log(S)}};return e.jsxs("div",{className:"bg-light min-vh-100 ",children:[o&&e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100",style:{background:"rgba(0,0,0,.45)",zIndex:999}}),o&&e.jsxs("div",{className:"position-fixed start-50 translate-middle-x bg-white shadow",style:{bottom:0,width:"95%",maxWidth:600,maxHeight:"95vh",borderRadius:"22px 22px 0 0",zIndex:1e3,transform:`translate(-50%, ${d}px)`,transition:j?"none":"transform .35s cubic-bezier(.25,1,.5,1)",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"bg-white",style:{position:"sticky",top:0,zIndex:2,borderRadius:"22px 22px 0 0"},children:[e.jsx("div",{className:"py-2",children:e.jsx("div",{className:"mx-auto bg-secondary",style:{width:40,height:4,borderRadius:2,opacity:.4}})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center px-3 pb-2 border-bottom",children:[e.jsx("h6",{className:"fw-bold m-0",children:"Add bank details"}),e.jsx($,{style:{cursor:"pointer"},onClick:C})]})]}),e.jsx("div",{className:"px-3 py-3",style:{overflowY:"auto",WebkitOverflowScrolling:"touch"},children:e.jsxs("form",{noValidate:!0,onSubmit:E,children:[e.jsx(x,{label:"Bank Name",name:"bankName",value:t.bankName,error:u.bankName,icon:f,onChange:m}),e.jsx(x,{label:"Account Name",name:"accountName",value:t.accountName,error:u.accountName,icon:f,onChange:m}),e.jsx(x,{label:"Account Number",name:"bankAccountNo",value:t.bankAccountNo,error:u.bankAccountNo,icon:M,onChange:m}),e.jsx("button",{className:"btn btn-primary w-100 mt-2",onClick:p,disabled:N,children:N?"updating...":"update"})]})})]})]})}function x({label:o,value:i,icon:l,error:s,disabled:c,name:d,onChange:h}){return e.jsxs("div",{className:`mb-2 ${s?"shake":""}`,children:[e.jsx("label",{className:"small text-muted",children:o}),e.jsxs("div",{className:"input-group",children:[l&&e.jsx("span",{className:"input-group-text bg-light",children:e.jsx(l,{size:16})}),e.jsx("input",{className:`form-control ${s?"is-invalid":""}`,value:i,name:d,disabled:c,onChange:h})]})]})}export{W as A,P as S};
