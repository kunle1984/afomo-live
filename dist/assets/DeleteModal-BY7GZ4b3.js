import{i,r as t,u as I,a as $,j as e,M as H,P as z,b as P,X as A,y as q,d as U,t as _}from"./index-BZyEwEIo.js";const V=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"m9 9.5 2 2 4-4",key:"1dth82"}]],Y=i("book-check",V);const G=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Z=i("check-check",G);const W=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ee=i("dollar-sign",W);const B=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],te=i("loader-circle",B);const D=[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["path",{d:"m9 20 3-6 3 6",key:"se2kox"}],["path",{d:"m6 8 6 2 6-2",key:"4o3us4"}],["path",{d:"M12 10v4",key:"1kjpxc"}]],se=i("person-standing",D);const J=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ne=i("save",J);const O=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ae=i("square-pen",O);const X=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],K=i("trash-2",X);function re(){const[s,o]=t.useState(!1),l=t.useRef(null),[r,g]=t.useState(""),[y,u]=t.useState(null),{user:k}=I(),c=JSON.parse(k),m=t.useRef(""),L=t.useRef(""),[T,S]=t.useState(60),N=t.useRef(!1),p=t.useRef(null),b=t.useRef(null);t.useEffect(()=>{const n=window.SpeechRecognition||window.webkitSpeechRecognition;if(!n){alert("Speech recognition not supported in this browser");return}const a=new n;return a.continuous=!0,a.interimResults=!0,a.lang="en-US",a.onresult=x=>{let M="";for(let f=x.resultIndex;f<x.results.length;f++){const d=x.results[f][0].transcript.trim();if(x.results[f].isFinal){const v=m.current.trim();if(d.startsWith(v)){const w=d.slice(v.length).trim();w&&(m.current+=" "+w,R(w))}else v.includes(d)||(m.current+=" "+d,R(d))}else M+=d+" "}g(m.current.trim()+" "+M),C()},a.onend=()=>{if(N.current)try{a.start()}catch{}},p.current=a,()=>{a.stop()}},[]);const R=n=>{n.toLowerCase().includes("sell")?u("Sell Intent"):u("Listening...")},F=()=>{m.current="",L.current="",g(""),u("Listening..."),o(!0),N.current=!0,S(60);try{p.current.start()}catch{}b.current=setInterval(()=>{S(n=>n<=1?(j(),0):n-1)},1e3),C()},C=()=>{clearTimeout(l.current),l.current=setTimeout(()=>{j()},4e3)};t.useEffect(()=>()=>{p.current?.stop(),clearInterval(b.current)},[]);const j=()=>{N.current=!1,o(!1),p.current?.stop(),clearInterval(b.current),clearTimeout(l.current)},h=$();t.useEffect(()=>{if(!s&&r.trim()){const n=setTimeout(()=>{c.accountType==="AGENT"?h(`/dashboard/agent/add-product/${encodeURIComponent(r.trim())}`):h(`/dashboard/add-product/${encodeURIComponent(r.trim())}`)},500);return()=>clearTimeout(n)}},[s,r,h]);const E=()=>{c.accountType==="AGENT"?h("/dashboard/agent/add-product/sell"):h("/dashboard/add-product/sell")};return e.jsxs("div",{className:"d-flex flex-column bg-white",style:{minHeight:"70vh"},children:[e.jsx("div",{className:"px-3 mt-2",children:e.jsxs("small",{className:"text-muted",children:["Welcome, ",c.username]})}),e.jsxs("div",{className:"flex-grow-1 d-flex flex-column justify-content-center align-items-center text-center",children:[s&&e.jsxs("div",{className:"mb-5 text-primary fw-semibold",children:[T,"s"]}),e.jsx("h3",{className:"fw-semibold mb-4",children:s?y:"Tap To Sell"}),e.jsxs("div",{className:`mic-glow-wrapper ${s?"active":""}`,onClick:s?j:F,children:[s&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"glow-ring r1"}),e.jsx("span",{className:"glow-ring r2"}),e.jsx("span",{className:"glow-ring r3"}),e.jsx("span",{className:"glow-ring r4"})]}),e.jsx("div",{className:"mic-inner",children:e.jsx(H,{size:46,className:"text-primary"})})]}),e.jsx("button",{className:"btn btn-light mt-4",style:{width:42,height:42,borderRadius:8,border:"1px solid #CFE1FF"},onClick:E,children:e.jsx(z,{size:18,className:"text-primary"})}),s&&e.jsxs("small",{className:"d-block mt-2 text-muted",children:["Listeningâ€¦ ",T,"s"]}),r&&e.jsxs("div",{className:"alert alert-light mt-3 small",children:['"',r,'"']})]})]})}function ce({showDeleteModal:s,setShowDeleteModal:o,productId:l,sellerId:r,bName:g,userJson:y}){$();const{mutate:u,isPending:k}=P({mutationFn:()=>U.delete(`${y?.accountType==="AGENT"?`${_}/${l}?sellerId=${r}`:`${_}/${l}`}`),onSuccess:c=>{o(!1),q.success("product deleted successfully",{autoClose:2e3})},onError:c=>{console.error(" error:",c)}});return e.jsxs("div",{className:"p-3 bg-light min-vh-100",children:[s&&e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100 fade-overlay",onClick:()=>o(!1)}),s&&e.jsxs("div",{className:`position-fixed top-50 start-50 translate-middle shadow   show 
          }`,style:{width:"92%",maxWidth:380,borderRadius:18,zIndex:1e3,border:"2px solid #FFD88A",background:"#fff"},onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3",children:[e.jsx("h6",{className:"fw-bold m-0 text-center",children:"Are you sure you want to delete?"}),e.jsx(A,{size:20,style:{cursor:"pointer"},onClick:()=>o(!1)})]}),e.jsx("div",{className:"mx-3 mb-3 p-3 rounded-4",style:{background:"#EAF4FF"},children:e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"btn btn-danger w-50  rounded-pill",onClick:u,children:[e.jsx(K,{size:30,className:"px-2 text-white"}),k?"deleting..":"Delete"]})})})]})]})}export{Y as B,Z as C,ee as D,te as L,se as P,ne as S,K as T,ae as a,ce as b,re as c};
