import{h as pe,u as V,r as s,a as U,b as K,j as e,c as Q,P as Te,E as B,y as H,e as X,s as De,d as $e,p as Ie,M as ae,i as qe,S as fe,m as He,X as J,U as Ue,k as oe,L as We,l as te,n as Oe,R as Be,f as z}from"./index-C66YhEwP.js";import{u as G,E as be,B as ge,C as Je,a as Ve,b as Qe,A as _e,c as Ke,H as Xe,S as Ge,d as y,e as Ye,f as Ze,F as es,R as ss,T as ts,P as as,g as is,h as ls,Q as ns,U as rs,M as cs,k as ds,V as os,l as ms,m as xs,i as hs,n as Ne,j as us,L as js}from"./Layout-CaVxGrcS.js";import{W as ve,C as ps,B as fs,P as bs,D as me,A as gs,L as we,S as xe,T as he,a as Ns}from"./TapToSell-Ck2qU6YP.js";import{S as Y}from"./star-HrJ7NX7c.js";const vs=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],ws=pe("arrow-down-left",vs);const ys=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Ss=pe("arrow-up-right",ys),{avatar:Cs}=Q;function ks(){const{user:i}=V(),r=JSON.parse(i),[n,d]=s.useState(!0),[m,h]=s.useState(!1),[x,v]=s.useState(!1),[l,p]=s.useState(!1),[S,A]=s.useState(!1),[N,u]=s.useState(!1),[P,F]=s.useState(!1),[w,q]=s.useState(!1),[L,E]=s.useState(!1),[C,T]=s.useState(!1),[R,D]=s.useState(!1),[c,f]=s.useState(!1),[g,o]=s.useState(!1),[a,t]=s.useState(!1),[b,M]=s.useState(!1),[ie,le]=s.useState(!1),ne="0236280645",[re,ce]=s.useState(!1),ye=U();function Se(k){const I=new Date(k),Me=I.getDate(),Ae=I.toLocaleString("default",{month:"short"});let _=I.getHours();const Le=I.getMinutes().toString().padStart(2,"0"),Ee=_>=12?"pm":"am";return _=_%12||12,`${Me} ${Ae}, ${_}:${Le}${Ee}`}const[$,Ce]=s.useState({currentPassword:"",newPassword:""}),{mutate:ke,isLoading:Pe,error:Gs,data:Ys}=K({mutationFn:k=>X.put(De,k),onSuccess:k=>{console.log(k),H.success("paswword changed successfully",{autoClose:2e3}),ye("/login")},onError:k=>{H.error(k.message,{autoClose:2e3})}}),{data:j,error:Zs,refetch:et,isFetching:Re}=G({queryKey:[Ie]}),ze=async()=>{try{await navigator.clipboard.writeText(ne),ce(!0),setTimeout(()=>ce(!1),1500)}catch(k){console.error("Copy failed",k)}},de=k=>{Ce({...$,[k.target.name]:k.target.value})},Fe=k=>{k.preventDefault();const I={currentPassword:$.currentPassword,newPassword:$.newPassword,twoFactorEnabled:!1,biometricsEnabled:!1};$.currentPassword.length===0||$.newPassword.length===0||(console.log(I),ke(I))};return e.jsxs("div",{className:"bg-light min-vh-100 ",children:[e.jsxs("div",{className:"bg-white p-3 d-flex justify-content-between align-items-center border-bottom",children:[e.jsx("h6",{className:"fw-bold m-0",children:"Profile"}),e.jsx(be,{size:20})]}),e.jsxs("div",{className:"position-relative rounded-2 ",children:[e.jsx("img",{src:j?.data?.profilePicture||Cs,alt:"profile",className:"w-100",style:{height:350,objectFit:"cover"}}),e.jsxs("div",{className:"position-absolute w-100 px-3  translate-middle-y",children:[e.jsx("div",{className:"w-50"}),e.jsx("div",{className:"card border-0 shadow text-white",style:{borderRadius:"18px",background:"linear-gradient(180deg, #0d6efd 0%, #0b5ed7 100%)",opacity:.9},children:e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsxs("h5",{className:"fw-bold mb-1",children:[j?.data?.businessName||j?.data?.firstName," "," stores",e.jsx(ge,{size:10,className:"text-white"})]}),e.jsxs("div",{className:"small opacity-75",children:[j?.data?.firstName," ",j?.data?.lastName]})]}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx("button",{className:"btn btn-light btn-sm rounded-circle",children:e.jsx(Te,{size:16,onClick:()=>t(!0)})})})]}),e.jsxs("div",{className:"d-flex flex-wrap gap-3 mt-2 small",children:[e.jsxs("span",{children:[e.jsx("small",{children:"NIN:"}),j?.data?.nin," ",e.jsx(B,{size:14,className:"ms-1"})]}),e.jsxs("span",{children:[e.jsx("small",{children:"BVN:"}),j?.data?.bvn," ",e.jsx(B,{size:14,className:"ms-1"})]})]}),e.jsxs("div",{className:"bg-white text-dark mt-3 p-3",style:{borderRadius:14},children:[e.jsxs("div",{className:"row g-2 small mb-2",children:[e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Email"}),e.jsxs("div",{className:"fw-semibold",children:[j?.data?.email," "]})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Store"}),e.jsxs("div",{className:"fw-semibold text-truncate",children:[j?.data?.location," "]})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Rating"}),e.jsxs("div",{className:"fw-semibold",children:[j?.data?.storeRating||5," "]})]})]}),e.jsxs("div",{className:"row g-2 mb-2 small",children:[e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Address"}),e.jsxs("div",{className:"fw-semibold text-truncate",children:[" ",j?.data?.location]})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Phone"}),e.jsx("div",{className:"fw-semibold small",children:j?.data?.phone})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Reg No"}),e.jsx("div",{className:"fw-semibold",children:j?.data?.businessRegistration})]})]})]})]})})]})]}),e.jsx("div",{style:{height:120}}),e.jsxs("div",{className:"px-3 mt-5",children:[e.jsx("h6",{className:"fw-bold ",children:"My Assets"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-1 mb-3",children:[e.jsx("button",{className:"btn btn-primary rounded-pill btn-sm fs-6 px-4",onClick:()=>le(!0),children:"Afomo Wallet"}),e.jsx("button",{className:"btn btn-secondary rounded-pill btn-sm fs-6 px-3",children:"Bank"}),e.jsx(Je,{size:30,className:"text-white bg-success rounded-5"})]}),e.jsx("div",{className:"card border-0 text-white shadow-sm",style:{borderRadius:16,background:"linear-gradient(135deg, #FFA500, #FFB703)"},children:e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"small fw-semibold d-flex align-items-center gap-1",style:{cursor:"pointer"},onClick:ze,children:["Virtual Account:",e.jsx("span",{className:"opacity-75",children:ne}),re?e.jsx(Ve,{size:14,className:"text-success ms-1"}):e.jsx(Qe,{size:14,className:"ms-1"})]}),e.jsx("div",{className:"form-check form-switch m-0",children:e.jsx("input",{className:"form-check-input",type:"checkbox",defaultChecked:!0})})]}),re&&e.jsx("small",{className:"text-white-50",children:"Copied!"}),e.jsxs("div",{className:"d-flex justify-content-between gap-2 mt-3",children:[e.jsx(Z,{icon:e.jsx(_e,{size:16}),label:"Deposit"}),e.jsx(Z,{icon:e.jsx(Ke,{size:16}),label:"Withdraw"}),e.jsx(Z,{icon:e.jsx(Xe,{size:16}),label:"History"})]})]})})]}),e.jsxs("div",{className:"px-3 mt-4",children:[e.jsx("div",{className:"card border-0 shadow-sm rounded-1",onClick:()=>d(!n),style:{cursor:"pointer"},children:e.jsxs("div",{className:"card-body d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx(Ge,{className:"text-danger"}),e.jsx("span",{className:"fw-medium",children:"Security & Privacy"})]}),e.jsx(y,{style:{transform:n?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]})}),e.jsx("div",{style:{maxHeight:n?300:0,opacity:n?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx("div",{className:"card border shadow-sm rounded-3 ",children:e.jsxs("div",{className:"card-body ",style:{backgroundColor:"#fdf0f0ff",borderRadius:8},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1 ",onClick:()=>h(!m),children:[e.jsx("p",{className:"fw-bold text-muted",children:"Change Password"}),e.jsx(y,{size:16,style:{transform:m?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsx("div",{style:{maxHeight:m?200:0,opacity:m?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsxs("form",{children:[e.jsx(ue,{label:"Current Password",value:$.currentPassword,onChange:de,name:"currentPassword"}),e.jsx(ue,{label:"New Password",value:$.newPassword,onChange:de,name:"newPassword"}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-sm mt-2 ",onClick:Fe,disabled:Pe,children:"save"})]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1 ",onClick:()=>f(!c),children:[e.jsx("p",{className:"fw-bold text-muted",children:"Recent Login Activity"}),e.jsx(y,{size:16,style:{transform:c?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsxs("div",{style:{maxHeight:c?200:0,opacity:c?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Device"}),e.jsx("p",{className:"fw-bold text-muted",children:j?.data?.recentLogins[0]?.device})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Location"}),e.jsx("p",{className:"fw-bold text-muted",children:"Wuse, Abuja"})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Time"}),e.jsx("p",{className:"fw-bold text-muted",children:Se(j?.data?.recentLogins[0]?.time)})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Status"}),e.jsx("p",{className:"fw-bold text-muted",children:j?.data?.recentLogins[0]?.status})]})]}),e.jsx(W,{label:"Two Factor Authentication",defaultChecked:j?.data?.twoFactorEnabled}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Delete/Activate Account"}),e.jsx(y,{size:16})]})]})})})]}),e.jsxs("div",{className:"px-3 mt-1 scrollbar-show",children:[e.jsx("div",{className:"card border-0 shadow-sm rounded-3",onClick:()=>p(!l),style:{cursor:"pointer"},children:e.jsxs("div",{className:"card-body d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx(Ye,{className:"text-primary"}),e.jsx("span",{className:"fw-medium",children:"Setting"})]}),e.jsx(y,{style:{transform:l?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]})}),e.jsx("div",{style:{maxHeight:l?500:0,opacity:l?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx("div",{className:"card border shadow-sm rounded-3 ",children:e.jsxs("div",{className:"card-body ",style:{backgroundColor:"#f1f9fdff",borderRadius:8},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3 ",onClick:()=>A(!S),children:[e.jsx("h6",{className:"fw-bold text-muted",children:"Notification & Preferences"}),e.jsx(y,{size:16,style:{transform:S?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsxs("div",{style:{maxHeight:S?200:0,opacity:S?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:[e.jsx(W,{label:"Push Notification",defaultChecked:j?.data?.settings?.pushNotifications}),e.jsx(W,{label:"Email/SMS Preferences",defaultChecked:j?.data?.settings?.smsNotifications}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center fw-bold text-muted",children:[e.jsx("p",{children:"Light/Dark Mode"}),e.jsx("p",{children:"System Default"})]})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1  ",onClick:()=>v(!x),children:[e.jsx("h6",{className:"fw-bold text-muted",children:"Save Payment Method"}),e.jsx(y,{size:16,style:{transform:x?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsxs("div",{style:{maxHeight:x?200:0,opacity:x?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center fw-bold text-muted",children:[e.jsx("p",{children:"Afomo Wallet"}),e.jsx("p",{children:"Virtual-07889900"})]}),e.jsx(W,{label:"Enable Biomtric",defaultChecked:!0}),e.jsx(W,{label:"Enable OTP Confirmation",defaultChecked:!0}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center fw-bold text-muted",children:[e.jsx("p",{children:"Payment Pin"}),e.jsx(y,{size:16})]})]}),e.jsxs("div",{className:"card border shadow-sm rounded-3  bg-light",children:[e.jsxs("div",{className:"card-body ",style:{maxHeight:300,overflowY:"auto",backgroundColor:"#f1f9fdff",borderRadius:8},children:[e.jsx("div",{className:"text-muted fw-bold",children:"Other Bank Account"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Bank"}),e.jsx("p",{className:"fw-bold text-muted",children:"GTB"})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Name"}),e.jsx("p",{className:"fw-bold text-muted",children:"Johh Will"})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Account No"}),e.jsx("p",{className:"fw-bold text-muted",children:"0988775566"})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("p",{className:"fw-bold text-muted",children:"Status"}),e.jsx("p",{className:"fw-bold text-muted",children:"Successfull"})]})]}),e.jsx("div",{className:"d-flex justify-content-between align-items-center fw-bold text-muted"})]})]})})})]}),e.jsxs("div",{className:"px-3 mt-1 scrollbar-show",children:[e.jsx("div",{className:"card border-0 shadow-sm rounded-3",onClick:()=>u(!N),style:{cursor:"pointer"},children:e.jsxs("div",{className:"card-body d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx(Ze,{className:"text-success"}),e.jsx("span",{className:"fw-medium",children:"Support & Help"})]}),e.jsx(y,{style:{transform:N?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]})}),e.jsx("div",{style:{maxHeight:N?500:0,opacity:N?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx("div",{className:"card border shadow-sm rounded-3 ",children:e.jsxs("div",{className:"card-body ",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",onClick:()=>F(!P),children:[e.jsx("h6",{className:"fw-bold text-muted",children:"Help & FAQs"}),e.jsx(y,{size:16,style:{transform:P?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsx("div",{style:{maxHeight:P?200:0,opacity:P?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx(es,{})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",onClick:()=>D(!R),children:[e.jsx("h6",{className:"fw-bold text-muted",children:"Contact Support"}),e.jsx(y,{size:16,style:{transform:R?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsx("div",{style:{maxHeight:R?200:0,opacity:R?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx("div",{className:"card border shadow-sm rounded-3 py-4 ",children:e.jsx("div",{className:"card-body py-2 my-1 text-justify fw-bold text-muted ",children:e.jsx("i",{children:"For questions, complaints, or support; Afomo Support Team Email: support@afomo.app In App Support: Available within the Afomo app"})})})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",onClick:()=>E(!L),children:[e.jsx("p",{className:"fw-bold text-muted",children:"Return & Refund Policy"}),e.jsx(y,{size:16,style:{transform:L?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsx("div",{style:{maxHeight:L?200:0,opacity:L?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx(ss,{})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",onClick:()=>q(!w),children:[e.jsx("p",{className:"fw-bold text-muted",children:"Terms & Condition"}),e.jsx(y,{size:16,style:{transform:w?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsx("div",{style:{maxHeight:w?200:0,opacity:w?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx(ts,{})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",onClick:()=>T(!C),children:[e.jsx("p",{className:"fw-bold text-muted",children:"Privacy Policy"}),e.jsx(y,{size:16,style:{transform:C?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsx("div",{style:{maxHeight:C?200:0,opacity:C?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx(as,{})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",onClick:()=>o(!g),children:[e.jsx("p",{className:"fw-bold text-muted",children:"Report & Abuse"}),e.jsx(y,{size:16,style:{transform:g?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.35s ease"}})]}),e.jsx("div",{style:{maxHeight:g?200:0,opacity:g?1:0,overflow:"hidden",transition:"all 0.4s ease"},children:e.jsx(is,{})})]})})})]}),a&&e.jsx(ls,{showProfileModal:a,setShowProfileModal:t,userJson:r,profileData:j,isFetching:Re}),ie&&e.jsx(ns,{showWalletModal:ie,setShowWalletModal:le}),b&&e.jsx(rs,{showUpgradeModal:b,setShowUpgradeModal:M})]})}function ue({label:i,name:r,onChange:n,value:d}){const[m,h]=s.useState(!1);return e.jsx("div",{className:"mb-1",children:e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:m?"text":"password",className:"form-control",placeholder:i,name:r,value:d,onChange:n}),e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>h(!m),children:m?e.jsx($e,{size:18}):e.jsx(B,{size:18})})]})})}function W({label:i,defaultChecked:r}){return e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-1",children:[e.jsx("p",{className:"fw-bold text-muted",children:i}),e.jsx("div",{className:"form-check form-switch m-0",children:e.jsx("input",{className:"form-check-input ms-3",type:"checkbox",defaultChecked:r})})]})}function Z({icon:i,label:r}){return e.jsxs("button",{className:"btn btn-light btn-sm flex-fill d-flex align-items-center justify-content-center gap-1 fw-semibold",children:[i,e.jsx("span",{children:r})]})}const{phone:Ps,jewelShop:Rs,bags:zs}=Q,Fs=[{id:1,title:"Original Winter Jacket 2XL",amount:"₦29,500",date:"Sat, 06 Jan 2026",type:"credit",img:Rs},{id:2,title:"Original Winter Jacket 2XL",amount:"₦29,500",date:"Sat, 06 Jan 2026",type:"credit",img:Ps},{id:3,title:"Original Winter Jacket 2XL",amount:"₦29,500",date:"Sat, 06 Jan 2026",type:"credit",img:zs}];function Ms(){return e.jsx("div",{className:"container py-3 ",style:{maxWidth:420},children:e.jsxs("div",{className:"card shadow-sm p-2",style:{border:"2px solid skyblue"},children:[e.jsx("div",{className:"d-flex justify-content-center mb-1",children:e.jsx("p",{className:"fw-bold",children:"My Pay"})}),e.jsx("p",{className:"text-start fw-semibold",children:"Overview"}),e.jsx("div",{className:"card shadow-sm mb-3 p-3",style:{border:"1px solid red"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"wallet-icon me-2",children:e.jsx(ve,{size:18})}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("small",{className:"text-muted",children:"My Sales"}),e.jsx("div",{className:"fw-bold fs-6",children:"₦1,239,187.81"})]}),e.jsx("button",{className:"btn btn-danger btn-sm rounded-pill",children:"Withdraw"})]})}),e.jsx("div",{className:"fw-semibold mb-2",children:"History"}),e.jsx("div",{className:" ",children:Fs.map(i=>e.jsx("div",{className:"card  px-0 p-2 my-1 border-0 ",style:{backgroundColor:"#ecececb7"},children:e.jsxs("div",{className:"d-flex align-items-center px-2",children:[e.jsx("img",{src:i.img,alt:"product",className:"rounded me-2",width:44,height:44}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("small",{className:"text-muted",children:i.date}),e.jsx("div",{className:"fw-semibold small",children:i.title}),e.jsx("div",{className:"fw-semibold text-muted",children:i.amount})]}),e.jsx("div",{className:"text-end",children:i.type==="credit"?e.jsx(ws,{size:14,className:"text-success"}):e.jsx(Ss,{size:14,className:"text-danger"})})]})},i.id))}),e.jsx("style",{children:`
        .wallet-icon {
          width: 36px;
          height: 36px;
          border-radius: 10px;
          background: #eaf2ff;
          display: flex;
          align-items: center;
          justify-content: center;
          color: #0d6efd;
        }
      `})]})})}const{avatar:je}=Q,As=[{from:"seller",text:"Good afternoon, item still available.",time:"4:20 PM"},{from:"buyer",text:"How much is the last price?",time:"4:24 PM"},{from:"seller",text:"₦15,500 final, delivery available.",time:"5:20 PM"},{from:"buyer",text:"Alright, i will be expecting it tomorrow.",time:"6:48 PM"}];function Ls(){const[i,r]=s.useState(0),[n,d]=s.useState(As),[m,h]=s.useState(""),[x,v]=s.useState(!1),[l,p]=s.useState(!1),[S,A]=s.useState("Voice Narration"),[N,u]=s.useState(!1),P=s.useRef(null),F=s.useRef([]),[w,q]=s.useState(!1),[L,E]=s.useState(!1),C=s.useRef(null);s.useRef(0);const T=new Array(38).fill(1),R=()=>{C.current&&(x?C.current.pause():C.current.play(),v(!x))},D=()=>{m.trim()&&(d([...n,{from:"buyer",text:m}]),h(""))},c=async()=>{if(N){P.current.stop(),u(!1);return}try{const f=await navigator.mediaDevices.getUserMedia({audio:!0}),g=new MediaRecorder(f);P.current=g,F.current=[],g.ondataavailable=o=>{o.data.size>0&&F.current.push(o.data)},g.onstop=()=>{const o=new Blob(F.current,{type:"audio/webm"}),a=URL.createObjectURL(o);d(t=>[...t,{from:"buyer",audio:a,type:"voice"}])},g.start(),u(!0)}catch{alert("Microphone permission denied")}};return e.jsxs("div",{className:"container px-0",style:{maxWidth:420},children:[e.jsxs("div",{className:"row m-2",children:[e.jsxs("div",{className:"col-8 text-muted small d-flex align-items-center",children:[e.jsx("img",{src:je,alt:"user",className:"rounded-circle ",style:{width:70,height:70,objectFit:"cover"}}),e.jsxs("div",{className:"ms-1 py-0",children:[e.jsx("h5",{children:"Dan Joe"}),e.jsx("small",{className:"d-block",children:"090887733"}),e.jsx(cs,{size:18,className:" pe-1"}),"Lagos, Nigeria"]})]}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsx(ds,{size:25,className:"text-primary",onClick:()=>p(!0)})}),e.jsx("div",{className:"col-6",children:e.jsx(os,{size:30,className:"text-primary"})})]})})]}),e.jsx("hr",{className:"text-mte"}),e.jsxs("div",{children:[e.jsx("div",{className:"voice-wave my-3",onClick:R,children:e.jsxs("div",{className:"d-flex",children:[e.jsx("img",{src:je,alt:"user",className:"rounded-circle me-2",style:{width:30,height:30,objectFit:"cover"}}),x?e.jsx(ms,{size:23,className:"text-dark mt-1"}):e.jsx(xs,{size:23,className:"text-dark mt-1"}),e.jsx("div",{className:`wave ${x?"playing":""}`,children:T.map((f,g)=>e.jsx("span",{},g))}),e.jsx("small",{className:"text-end text-muted ms-3",children:"7:00Pm"})]})}),e.jsx("audio",{ref:C,src:"/voice-sample.mp3"})]}),e.jsx("div",{className:"chat-box p-1 ",style:{height:"400px"},children:n.map((f,g)=>e.jsxs("div",{className:`chat-msg ${f.from==="buyer"?"me":""}`,children:[f.type==="voice"?e.jsx("audio",{controls:!0,src:f.audio,style:{width:"200px"}}):e.jsx(e.Fragment,{children:f.text}),e.jsx("small",{className:` ${f.from==="buyer"?"text-end text-white":"text-start text-muted "} ms-2 d-block`,children:f.time})]},g))}),e.jsxs("div",{className:"chat-input d-flex justify-content-between align-items-center   border-top mx-3",children:[e.jsx(ae,{size:40,className:`btn ${N?"btn-danger":"btn-primary"} text-white`,style:{width:64,height:50,borderRadius:"50%"},onClick:c}),e.jsx("button",{className:"btn btn-sm btn-outline-primary rounded-pill px-3 mx-2",children:"Buy"}),e.jsx("input",{className:"form-control form-control-sm rounded-pill",placeholder:"Type a message",value:m,onChange:f=>h(f.target.value)}),e.jsx("button",{className:"btn btn-primary btn-sm ms-2",onClick:D,children:e.jsx(qe,{size:16})})]}),l&&e.jsx("div",{className:"call-overlay",children:e.jsxs("div",{className:"call-card",children:[e.jsx("h6",{children:"Calling Seller…"}),e.jsx("button",{className:"btn btn-danger mt-3",onClick:()=>p(!1),children:"End Call"})]})})]})}const{google:Es,phone:Ts,jewelShop:Ds,bags:$s,avatar:Is,defaultProduct:qs}=Q,Hs=[{id:1,view:300,img:Es},{id:2,view:500,img:Ts},{id:3,view:700,img:Ds},{id:4,view:200,img:$s}],Us=i=>new Date(i).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}).toLowerCase();function Ws(){const[i,r]=s.useState("New"),n=U(),[d,m]=s.useState({}),{data:h=[],isLoading:x,error:v}=G({queryKey:[`${He}`]});return console.log(h?.data?.items),e.jsxs("div",{className:"container px-0",style:{maxWidth:420},children:[e.jsx("div",{className:"d-flex justify-content-between align-items-center p-3 border-bottom"}),e.jsx("div",{className:"px-3 py-2",children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx(ae,{className:"text-white me-2 btn btn-primary",style:{width:42,height:42,borderRadius:"50%"}}),e.jsx("input",{className:"form-control bg-light border-0 rounded-pill",placeholder:"Search chats"}),e.jsx(fe,{className:"text-white ms-2 btn btn-primary",style:{width:42,height:42,borderRadius:"50%"}})]})}),e.jsxs("div",{className:"px-3 mt-2",children:[e.jsx("small",{className:"text-muted",children:"Recently viewed"}),e.jsx("div",{className:"d-flex gap-3 mt-2 overflow-auto ",children:Hs.map(l=>e.jsxs("div",{className:"text-center position-relative",children:[e.jsx("img",{src:l.img,className:"rounded",width:"80",height:"120",alt:""}),e.jsxs("div",{className:"position-absolute fw-bold text-center text-white",style:{bottom:"10px",left:"25px"},children:[e.jsx(B,{size:20}),e.jsx("small",{className:"d-block ",children:l.view})]})]},l.id))})]}),e.jsx("div",{className:"px-3 mt-3",children:e.jsx("div",{className:"filter-pill fw-semibold",children:["New","Pending"].map(l=>e.jsx("span",{className:`filter-item ${i===l?"active text-primary":"text-white"}`,onClick:()=>r(l),children:l},l))})}),e.jsx("div",{className:"mt-3",children:h?.data?.items.map(l=>e.jsxs("div",{className:"d-flex align-items-center px-3 py-2 chat-row",onClick:()=>n(`/dashboard/chat/${l.product?.id}/${l.participants[1]?.user.id}/${l.participants[0]?.user.id}`),children:[e.jsx("img",{src:l.product?.images[0]?.url||qs,className:"rounded-circle me-3",width:"48",height:"48",alt:""}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("h6",{className:"mb-0",children:l.product.name}),e.jsx("small",{className:"text-muted",children:Us(l.product?.createdAt)})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("img",{src:Is,alt:"user",className:"rounded-circle ",style:{width:30,height:30,objectFit:"cover"}}),e.jsx("small",{className:"text-muted",children:l.messages[0]?.content}),l.unreadCount>0?e.jsx("span",{className:"badge bg-primary rounded-pill",children:l.unreadCount}):e.jsx(ps,{size:16,className:"text-primary"})]})]})]},l.id))})]})}const O=["https://images.unsplash.com/photo-1527980965255-d3b416303d12","https://images.unsplash.com/photo-1527980965255-d3b416303d12","https://images.unsplash.com/photo-1527980965255-d3b416303d12"];function Os(){const[i,r]=s.useState(!1),[n,d]=s.useState(0),[m,h]=s.useState(!1);s.useEffect(()=>{document.body.style.overflow=i?"hidden":"auto"},[i]);const x=p=>{d(p),r(!0)},v=()=>d(p=>(p+1)%O.length),l=()=>d(p=>(p-1+O.length)%O.length);return e.jsxs("div",{className:"container py-3",style:{maxWidth:420},children:[e.jsxs("div",{className:"position-relative rounded-2 ",children:[e.jsx("img",{src:"https://images.unsplash.com/photo-1527980965255-d3b416303d12",alt:"profile",className:"w-100",style:{height:250,objectFit:"cover"}}),e.jsx(be,{size:24,className:"share-profile text-white",role:"button",onClick:()=>h(!m)}),m&&e.jsx("div",{className:"dropdown-menu-custom p-3",children:e.jsx("div",{className:"dropdown-item",children:"Share Profile"})}),e.jsx("div",{className:"position-absolute w-100 px-3  translate-middle-y",children:e.jsx("div",{className:"card border-0 shadow text-white",style:{borderRadius:"18px",background:"linear-gradient(180deg, #0d6efd 0%, #0b5ed7 100%)",opacity:.9},children:e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{children:"John Doe"}),e.jsxs("h5",{className:"fw-bold mb-1",children:["jo****@*****.com"," ",e.jsx(ge,{size:10,className:"text-white"})]})]}),e.jsx("div",{className:"d-flex gap-2"})]}),e.jsxs("div",{className:"bg-white text-dark  p-3",style:{borderRadius:14},children:[e.jsxs("div",{className:"row g-2 small mb-2",children:[e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Username"}),e.jsx("div",{className:"fw-semibold",children:"jo***"})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Store"}),e.jsx("div",{className:"fw-semibold",children:"Sango Ota"})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Rating"}),e.jsxs("div",{className:"fw-semibold",children:[e.jsx(Y,{size:14,className:"text-warning"}),e.jsx(Y,{size:14,className:"text-warning"}),e.jsx(Y,{size:14,className:"text-warning"})," 4.5"]})]})]}),e.jsxs("div",{className:"row g-2 mb-2 small",children:[e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Address"}),e.jsx("div",{className:"fw-semibold",children:"Sango Ota"})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"text-muted",children:"Phone"}),e.jsx("div",{className:"fw-semibold",children:"07******677"})]})]})]})]})})})]}),e.jsxs("div",{className:"mb-3 mt-5 py-5",children:[e.jsx("div",{className:"card shadow mt-4",style:{backgroundColor:"#e8f8e8"},children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 px-3",children:[e.jsxs("div",{className:"px-2 text-center fw-semibold",children:[e.jsx("small",{children:"33"}),e.jsx("p",{children:"Transaction"})]}),e.jsxs("div",{className:"p-1 text-center fw-semibold",children:[e.jsx("small",{children:"33"}),e.jsx("p",{children:"Trust Score"})]}),e.jsxs("div",{className:"p-1 text-center fw-semibold",children:[e.jsx("small",{children:"33"}),e.jsx("p",{children:"Reviews Given"})]})]})}),e.jsx("div",{className:"fw-semibold small mb-2 mt-4",children:"Photos"}),e.jsx("div",{className:"row g-2",children:O.map((p,S)=>e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"position-relative",children:[e.jsx("div",{className:"photo-tile",onClick:()=>x(S),children:e.jsx("img",{src:p,alt:"gallery"})}),e.jsx("div",{className:"position-absolute fw-bold text-center text-white",style:{bottom:"10px",left:"45px"},children:e.jsx("small",{className:"d-block ",children:"455"})})]})},S))})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"btn btn-danger rounded-pill px-5",children:"Block User"})}),i&&e.jsxs("div",{className:"photo-viewer",children:[e.jsx("img",{src:O[n],alt:"fullscreen"}),e.jsx("button",{className:"close-btn",onClick:()=>r(!1),children:e.jsx(J,{size:24})}),e.jsx("button",{className:"nav-btn left",onClick:l,children:e.jsx(hs,{size:28})}),e.jsx("button",{className:"nav-btn right",onClick:v,children:e.jsx(y,{size:28})})]})]})}const Bs=()=>{const{user:i}=V(),r=JSON.parse(i),n=U(),[d,m]=s.useState(!1);return e.jsxs("div",{className:"container d-flex justify-content-center py-3",children:[e.jsx("div",{className:"card dashboard-card",children:e.jsxs("div",{className:"card-body p-3",children:[e.jsx("div",{className:"text-start mb-3",children:e.jsxs("small",{className:"text-muted",children:["Welcome, ",r.username]})}),e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"fw-semibold small mb-2",children:"Quick Actions"})}),e.jsxs("div",{className:"row g-2 ",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"card shadow-sm justify-items-between align-items-center pt-2",style:{backgroundColor:"#badff7",height:90,width:95},onClick:()=>n("seller/tap-to-sell"),children:[e.jsx("div",{className:"text-center",style:{backgroundColor:"#5bb4f0",borderRadius:"50%",width:32,height:32,opacity:.8},children:e.jsx(ae,{size:15,className:"text-white"})}),e.jsx("small",{className:"text-dark text-center fw-semibold ",children:"Add New Product"})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"card shadow-sm justify-items-between align-items-center pt-2",style:{backgroundColor:"#badff7",height:90,width:95},onClick:()=>n("/dashboard/seller/manage-listing"),children:[e.jsx("div",{className:"text-center",style:{backgroundColor:"#5bb4f0",borderRadius:"50%",width:32,height:32,opacity:.8},children:e.jsx(fs,{size:15,className:"text-white"})}),e.jsx("small",{className:"text-dark text-center fw-semibold py-2",children:"Manage Listing"})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"card shadow-sm justify-items-between align-items-center pt-2",style:{backgroundColor:"#badff7",height:90,width:95},children:[e.jsx("div",{className:"text-center",style:{backgroundColor:"#5bb4f0",borderRadius:"50%",width:32,height:32,opacity:.8},children:e.jsx(ve,{size:15,className:"text-white"})}),e.jsx("small",{className:"text-dark text-center fw-semibold pt-2",children:"Wallet"})]})})]}),e.jsxs("div",{className:"row g-2 mt-4",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"card shadow-sm justify-items-between align-items-center pt-2",style:{backgroundColor:"#badff7",height:90,width:95},onClick:()=>n("seller/profile"),children:[e.jsx("div",{className:"text-center",style:{backgroundColor:"#5bb4f0",borderRadius:"50%",width:32,height:32,opacity:.8},children:e.jsx(Ue,{size:15,className:"text-white"})}),e.jsx("small",{className:"text-dark text-center fw-semibold pt-2",children:"Profile"})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"card shadow-sm justify-items-between align-items-center pt-2",style:{backgroundColor:"#badff7",height:90,width:95},children:[e.jsx("div",{className:"text-center",style:{backgroundColor:"#5bb4f0",borderRadius:"50%",width:32,height:32,opacity:.8},children:e.jsx(bs,{size:15,className:"text-white"})}),e.jsx("small",{className:"text-dark text-center fw-semibold pt-2",children:"Complaints"})]})})]}),e.jsxs("div",{className:"row g-2 mb-3 mt-3",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"card shadow-sm justify-items-between align-items-center pt-2 text-white",style:{backgroundColor:"#9a55e9",height:110,width:155,opacity:.9},children:[e.jsx("div",{className:"text-center",style:{backgroundColor:"#6110ad",borderRadius:"50%",width:32,height:32,opacity:.8},children:e.jsx(me,{size:15,className:"text-white"})}),e.jsx("small",{children:"Total Sales"}),e.jsx("h4",{children:"₦34,010.98"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"card shadow-sm justify-items-between align-items-center pt-2 text-white",style:{backgroundColor:"#46d4e7d7",height:110,width:155,opacity:.9},children:[e.jsx("div",{className:"text-center",style:{backgroundColor:"#4d86ee",borderRadius:"50%",width:32,height:32,opacity:.8},children:e.jsx(me,{size:15,className:"text-white"})}),e.jsx("small",{children:"Total Listings"}),e.jsx("h4",{children:"66"})]})})]})]})}),d&&e.jsx(gs,{openSellerForm:d,setOpenSellerForm:m})]})};function Js(){const{user:i}=V(),r=JSON.parse(i),[n,d]=s.useState(!1),m=s.useRef(null),h=U(),[x,v]=s.useState([]),[l,p]=s.useState({});s.useRef(null),s.useRef(null),s.useRef(null);const S=t=>{const b=Array.from(t).map(M=>({file:M,url:URL.createObjectURL(M)}));v(M=>[...M,...b])},A=t=>{v(x.filter((b,M)=>M!==t))},N=()=>{const t={};return o.name||(t.name=!0),o.price||(t.price=!0),o.quantity||(t.quantity=!0),o.description||(t.description=!0),p(t),Object.keys(t).length===0},{mutate:u,isPending:P,isError:F,error:w,isFetching:q,isSuccess:L,data:E}=K({mutationFn:t=>X.post(oe,t,{headers:{"Content-Type":"multipart/form-data"}}),onSuccess:t=>{console.log(t),H.success("product created successfully",{autoClose:2e3,onClose:()=>h("/dashboard/seller/tap-to-sell")})},onError:t=>{console.error(" error:",t)}}),{mutate:C,isPending:T,isError:R,error:D,isSuccess:c,data:f}=K({mutationFn:t=>X.post(oe,t),onSuccess:t=>{t?.data&&console.log(t),H.success("product created successfully",{autoClose:2e3,onClose:()=>h("/dashboard/seller/tap-to-sell")})},onError:t=>{H.error(`✅ ${t.message}`,{autoClose:2e3}),setSubmitting(!1),console.log(t)}});console.log(x);const g=()=>{if(!N())return;const t=new FormData;t.append("name",o.name),t.append("price",o.price),t.append("description",o.description),t.append("quantity",o.quantity),t.append("status",o.status),x.forEach(b=>{t.append("images",b.file)}),u(t),d(!0)},[o,a]=s.useState({name:"",price:"",description:"",quantity:"",status:"ACTIVE"});return console.log(o),e.jsx("div",{className:"bg-light min-vh-80 d-flex flex-column",children:e.jsxs("div",{className:"px-3 mt-3",style:{maxWidth:420,width:"100%"},children:[e.jsxs("p",{className:"small text-muted",children:["Welcome, ",e.jsx("strong",{children:r?.username})]}),e.jsxs("div",{className:"card border-0 shadow-sm rounded-4 p-3",children:[e.jsx(ee,{label:"Product Name",value:o.name,onChange:t=>a({...o,name:t})}),e.jsx(Vs,{label:"Description",value:o.description,onChange:t=>a({...o,description:t})}),e.jsx(ee,{label:"Price",value:o.price,onChange:t=>a({...o,price:t})}),e.jsx(ee,{label:"Quantity",value:o.quantity,onChange:t=>a({...o,quantity:t})}),o.name.length!==0&&e.jsxs("div",{className:"text-center my-2",children:[e.jsx("button",{className:"btn btn-sm btn-primary rounded-pill mx-3",children:e.jsx("span",{className:"px-2",children:"yes"})}),e.jsx("button",{className:"btn btn-sm btn-outline-primary rounded-pill px-2",children:e.jsx("span",{className:"px-2",children:"edit"})})]}),e.jsxs("div",{className:"border rounded p-3 text-center mb-3 bg-light",onClick:()=>m.current.click(),style:{cursor:"pointer"},children:[e.jsx(Ne,{size:30,className:"mb-2"}),e.jsx("div",{className:"small text-muted",children:"Tap to take photo or video"})]}),e.jsx("input",{type:"file",hidden:!0,multiple:!0,accept:"image/*,video/*",ref:m,onChange:t=>S(t.target.files)}),x.length>0&&e.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:x.map((t,b)=>e.jsxs("div",{className:"position-relative",children:[e.jsx("img",{src:t.url,alt:"",width:70,height:70,className:"rounded object-fit-cover"}),e.jsx(J,{size:14,className:"position-absolute top-0 end-0 bg-dark text-white rounded-circle p-1",role:"button",onClick:()=>A(b)})]},b))}),e.jsx("button",{className:"btn btn-primary w-100 rounded-pill",disabled:n,onClick:g,children:n?e.jsx(we,{className:"spin"}):"Post"})]})]})})}function ee({label:i,value:r,onChange:n}){return e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{className:"form-label small text-muted",children:i}),e.jsx("input",{className:"form-control rounded-3",value:r,onChange:d=>n(d.target.value)})]})}function Vs({label:i,value:r,onChange:n}){return e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{className:"form-label small text-muted",children:i}),e.jsx("textarea",{className:"form-control rounded-3",rows:2,value:r,onChange:d=>n(d.target.value)})]})}const{defaultProduct:Qs}=Q;function _s(){const[i,r]=s.useState(null),[n,d]=s.useState(!1),[m,h]=s.useState([]),{token:x}=V(),[v,l]=s.useState(1),[p]=s.useState(10),[S,A]=s.useState(""),[N,u]=s.useState(""),P=U(),F=()=>h(R.map(c=>c.id)),w=()=>h([]),q=()=>{window.confirm("Delete selected products?")&&(setProducts(R.filter(c=>!m.includes(c.id))),w(),d(!1))},L=(c,f)=>{if(c.length<=f)return e.jsx("p",{children:c});const g=`${c.substring(0,f)}...`;return e.jsx("p",{children:g})},{data:E,isLoading:C,isFetching:T}=G({queryKey:["seller-products",v,N],queryFn:async()=>(await fetch(`https://afomo-xagx.onrender.com/api${te}?status=ACTIVE&page=${v}&pageSize=${p}&search=${N}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`}})).json(),keepPreviousData:!0}),R=E?.data?.items||[],D=E?.data?.totalPages||1;return console.log(R),e.jsxs("div",{className:"container py-3",style:{maxWidth:450},children:[e.jsx("div",{className:"px-2 pt-2",children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("span",{className:"input-group-text bg-white",children:e.jsx(fe,{size:16})}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Search products...",value:S,onChange:c=>A(c.target.value)}),S&&e.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>A(""),children:e.jsx(J,{size:14})})]})}),e.jsx("h6",{className:"fw-bold mb-0 flex-grow-1 text-center py-3",children:"Manage Listing"}),e.jsx("div",{className:"row g-2",children:C?e.jsx(We,{}):e.jsxs(e.Fragment,{children:[R.map(c=>e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"product-card shadow-sm bg-white rounded-3 position-relative",children:[e.jsxs("div",{className:"product-image-wrapper position-relative",children:[e.jsx("img",{src:c.images[0]?.url||Qs,alt:c.name}),e.jsxs("div",{className:"p-1 text-center position-absolute bottom-0 start-0  w-100",style:{backgroundColor:"#1e98e9",opacity:.9,borderBottomLeftRadius:"10px",borderBottomRightRadius:"10px"},children:[" ",e.jsxs("span",{className:"text-white",children:[c.quantity," Sold"]})]})]}),e.jsxs("div",{className:"px-2 py-2 d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:"product-name ",children:L(c.name,20)}),c.price," ",e.jsx("del",{className:" text-muted small",children:e.jsx("small",{children:"14,000"})})]}),e.jsx(xe,{className:"text-end  text-primary",size:15,onClick:()=>P(`/dashboard/edit-product/${c.id}`)})]})]})},c.id)),T&&!C&&e.jsx("div",{className:"text-center small py-1 text-muted",children:"Searching..."})]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3 px-2",children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary",disabled:v===1||T,onClick:()=>l(c=>c-1),children:"Prev"}),e.jsxs("span",{className:"small fw-semibold",children:["Page ",v," of ",D]}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",disabled:v===D||T,onClick:()=>l(c=>c+1),children:"Next"})]}),n&&m.length>0&&e.jsx("div",{className:"position-fixed bottom-0 start-0 end-0 bg-white border-top p-2 shadow",children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:F,children:"Select All"}),e.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:w,children:"Clear"}),e.jsxs("div",{className:"flex-grow-1 text-center small fw-semibold",children:[m.length," selected"]}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:q,children:e.jsx(he,{size:16})})]})}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-50",onClick:()=>r(null),style:{zIndex:1050}}),e.jsx("div",{className:"position-fixed bottom-0 start-0 end-0 bg-white rounded-top-4 p-3",style:{zIndex:1100},children:e.jsxs("div",{className:"list-group list-group-flush",children:[e.jsxs("button",{className:"list-group-item d-flex align-items-center gap-3",children:[e.jsx(B,{size:18})," View"]}),e.jsxs("button",{className:"list-group-item d-flex align-items-center gap-3",children:[e.jsx(xe,{size:18})," Edit"]}),e.jsxs("button",{className:"list-group-item d-flex align-items-center gap-3 text-danger",children:[e.jsx(he,{size:18})," Delete"]}),e.jsxs("button",{className:"list-group-item d-flex align-items-center gap-3 text-muted",onClick:()=>r(null),children:[e.jsx(J,{size:18})," Close"]})]})})]})]})}function Ks(){const{user:i}=V();JSON.parse(i);const[r,n]=s.useState(!1),d=s.useRef(null),m=U(),[h,x]=s.useState([]),[v,l]=s.useState({}),{productId:p}=Oe();s.useRef(null),s.useRef(null),s.useRef(null);const S=a=>{const t=Array.from(a).map(b=>({file:b,url:URL.createObjectURL(b)}));x(b=>[...b,...t])},A=a=>{x(h.filter((t,b)=>b!==a))},N=a=>{P({...u,[a.target.name]:a.target.value})},[u,P]=s.useState({name:"",price:"",description:"",quantity:"",images:"",status:"ACTIVE"}),F=()=>{const a={};return u.name||(a.name=!0),u.price||(a.price=!0),u.quantity||(a.quantity=!0),u.description||(a.description=!0),l(a),Object.keys(a).length===0},{data:w=[],isLoading:q,error:L,isFetching:E}=G({queryKey:[`${te}/${p}`]});console.log(w?.data),s.useEffect(()=>{if(!E&&w){const{name:a,price:t,description:b,quantity:M}=w?.data;P({name:a||"",price:t||"",description:b||"",quantity:M||"",status:"ACTIVE"})}},[E,w]);const{mutate:C,isPending:T,isError:R,error:D,isFetching:c,isSuccess:f,data:g}=K({mutationFn:a=>X.put(`${te}/${p}`,a,{headers:{"Content-Type":"multipart/form-data"}}),onSuccess:a=>{console.log(a),H.success("product updated successfully",{autoClose:2e3,onClose:()=>m("/dashboard/seller/manage-listing")})},onError:a=>{console.error(" error:",a)}}),o=()=>{if(!F())return;const a=new FormData;a.append("name",u.name),a.append("price",u.price),a.append("description",u.description),a.append("quantity",u.quantity),a.append("status",u.status),h.forEach(t=>{a.append("images",t.file)}),C(a),n(!0),setTimeout(()=>{n(!1)},1500)};return e.jsx("div",{className:"bg-light min-vh-80 d-flex flex-column",children:e.jsx("div",{className:"px-3 mt-3",style:{maxWidth:420,width:"100%"},children:e.jsxs("div",{className:"card border-0 shadow-sm rounded-4 p-3",children:[e.jsx(se,{label:"Product Name",value:w?.data?.name,name:"name",onChange:N}),e.jsx(Xs,{label:"Description",name:"description",value:u.description,onChange:N}),e.jsx(se,{label:"Price",value:u.price,name:"price",onChange:N}),e.jsx(se,{label:"Quantity",name:"quantity",value:u.quantity,onChange:N}),e.jsxs("div",{className:"border rounded p-3 text-center mb-3 bg-light",onClick:()=>d.current.click(),style:{cursor:"pointer"},children:[e.jsx(Ne,{size:30,className:"mb-2"}),e.jsx("div",{className:"small text-muted",children:"Tap to take photo or video"})]}),e.jsx("input",{type:"file",hidden:!0,multiple:!0,accept:"image/*,video/*",ref:d,onChange:a=>S(a.target.files)}),h.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:h.map((a,t)=>e.jsxs("div",{className:"position-relative",children:[e.jsx("img",{src:a.url,alt:"",width:70,height:70,className:"rounded object-fit-cover"}),e.jsx(J,{size:14,className:"position-absolute top-0 end-0 bg-dark text-white rounded-circle p-1",role:"button",onClick:()=>A(t)})]},t))})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:w?.data?.images?.map((a,t)=>e.jsx("div",{className:"position-relative",children:e.jsx("img",{src:a.url,alt:"",width:70,height:70,className:"rounded object-fit-cover"})},a.id))})}),e.jsx("button",{className:"btn btn-primary w-100 rounded-pill",disabled:r,onClick:o,children:r?e.jsx(we,{className:"spin"}):"Edit"})]})})})}function se({label:i,value:r,onChange:n,name:d}){return e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{className:"form-label small text-muted",children:i}),e.jsx("input",{className:"form-control rounded-3",value:r,name:d,onChange:n})]})}function Xs({label:i,value:r,onChange:n,name:d}){return e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{className:"form-label small text-muted",children:i}),e.jsx("textarea",{className:"form-control rounded-3",rows:2,value:r,name:d,onChange:n})]})}function lt(){return e.jsx(Be,{children:e.jsxs(z,{path:"/",element:e.jsx(js,{}),children:[e.jsx(z,{index:!0,element:e.jsx(Bs,{})}),e.jsx(z,{path:"/seller/tap-to-sell",element:e.jsx(Ns,{})}),e.jsx(z,{path:"seller/manage-listing",element:e.jsx(_s,{})}),e.jsx(z,{path:"seller/profile",element:e.jsx(ks,{})}),e.jsx(z,{path:"seller/seller-mypay/:id",element:e.jsx(Ms,{})}),e.jsx(z,{path:"chat/:productId/:sellerId/:buyerId",element:e.jsx(us,{})}),e.jsx(z,{path:"seller-chat/",element:e.jsx(Ls,{})}),e.jsx(z,{path:"seller-chat-display",element:e.jsx(Ws,{})}),e.jsx(z,{path:"add-product",element:e.jsx(Js,{})}),e.jsx(z,{path:"seller/buyer-profile/:id",element:e.jsx(Os,{})}),e.jsx(z,{path:"edit-product/:productId",element:e.jsx(Ks,{})})]})})}export{lt as default};
